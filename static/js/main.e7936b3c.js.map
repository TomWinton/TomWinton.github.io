{"version":3,"file":"static/js/main.e7936b3c.js","mappings":"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C,GACN9R,KAAK6zC,OAAO/hC,EAAS,EACxB,KAnBL,GAA2B8tB,ICF3B,SAASulB,KACLnlD,KAAKuC,EAAI,EACTvC,KAAKoP,EAAI,EACTpP,KAAK+B,EAAI,EACT/B,KAAK8B,EAAI,EACT9B,KAAKs3B,KAAO,IACf,CDiBD4tB,GAAM5pD,UAAU01B,UAAY,QAC5Bk0B,GAAM5pD,UAAUmnC,WAAY,EAC5ByiB,GAAM5pD,UAAUo6B,oBAAsB,CAAC,UACvCn3B,EAAc2mD,IACdluC,EAAQC,gBAAgBiuC,GAAO,SAAU,EAAGjvC,KAC5Ce,EAAQC,gBAAgBiuC,GAAO,QAAS,EAAGjvC,KAC3Ce,EAAQC,gBAAgBiuC,GAAO,aAAa,GAC5CluC,EAAQ6B,WAAWqsC,GAAO,CACtBpoD,SAAU,QACVsoD,YAAa,WACbC,YAAa,aC1BjB,IAAIC,GAAY,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEAC,GAAY,CACZ,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IA8KJvuC,EAAQC,gBAAgByR,GAAM,aAAc,EAAGzS,IAAsBe,EAAQoC,gBC7qB7EpC,EAAQC,gBAAgByR,GAAM,aAAc,EAAGzS,IAAsBe,EAAQoC,gBCsB7EpC,EAAQC,gBAAgByR,GAAM,WAAY,EAAGzS,IAAsBe,EAAQoC,gBC9B3E,SAASosC,GAAMC,EAAWC,EAASC,EAASC,EAAOC,GAC/C,IAAIC,EAAYH,EAAUD,EAASK,EAAUF,EAAQD,EACrD,OAAkB,IAAdE,EACOF,EAAQG,EAAU,EAEb,IAAZA,EACOH,EAGDG,IADCN,EAAYC,GAAWI,GACJF,CAEjC,CCoFD5uC,EAAQC,gBAAgByR,GAAM,iBAAkB,GAAKzS,IAAsBe,EAAQoC,gBACnFpC,EAAQC,gBAAgByR,GAAM,mBAAoB,GAAKzS,IAAsBe,EAAQoC,gBACrFpC,EAAQC,gBAAgByR,GAAM,kBAAmB,WAAY,KAAM1R,EAAQoC,gBAC3EpC,EAAQC,gBAAgByR,GAAM,eAAe,EAAO,KAAM1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","sources":["../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/konva/lib/Global.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/konva/lib/Util.js","../node_modules/@babel/runtime/helpers/esm/toArray.js","../node_modules/konva/lib/Validators.js","../node_modules/konva/lib/Factory.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/konva/lib/Context.js","../node_modules/konva/lib/Canvas.js","../node_modules/konva/lib/DragAndDrop.js","../node_modules/konva/lib/Node.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/konva/lib/Container.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/konva/lib/PointerEvents.js","../node_modules/konva/lib/Stage.js","../node_modules/konva/lib/Shape.js","../node_modules/konva/lib/Layer.js","../node_modules/konva/lib/FastLayer.js","../node_modules/konva/lib/Group.js","../node_modules/konva/lib/Animation.js","../node_modules/konva/lib/Tween.js","../node_modules/konva/lib/_CoreInternals.js","../node_modules/konva/lib/shapes/Arc.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/konva/lib/shapes/Line.js","../node_modules/konva/lib/shapes/Path.js","../node_modules/konva/lib/shapes/Arrow.js","../node_modules/konva/lib/shapes/Circle.js","../node_modules/konva/lib/shapes/Ellipse.js","../node_modules/konva/lib/shapes/Image.js","../node_modules/konva/lib/shapes/Label.js","../node_modules/konva/lib/shapes/Rect.js","../node_modules/konva/lib/shapes/RegularPolygon.js","../node_modules/konva/lib/shapes/Ring.js","../node_modules/konva/lib/shapes/Sprite.js","../node_modules/konva/lib/shapes/Star.js","../node_modules/konva/lib/shapes/Text.js","../node_modules/konva/lib/shapes/TextPath.js","../node_modules/konva/lib/shapes/Transformer.js","../node_modules/konva/lib/shapes/Wedge.js","../node_modules/konva/lib/filters/Blur.js","../node_modules/konva/lib/filters/Brighten.js","../node_modules/konva/lib/filters/Contrast.js","../node_modules/konva/lib/filters/Enhance.js","../node_modules/konva/lib/filters/Emboss.js","../node_modules/konva/lib/filters/HSL.js","../node_modules/konva/lib/filters/HSV.js","../node_modules/konva/lib/filters/Mask.js","../node_modules/konva/lib/filters/Kaleidoscope.js","../node_modules/konva/lib/filters/Noise.js","../node_modules/konva/lib/filters/Pixelate.js","../node_modules/konva/lib/filters/Posterize.js","../node_modules/konva/lib/filters/RGB.js","../node_modules/konva/lib/filters/RGBA.js","../node_modules/konva/lib/filters/Threshold.js","../node_modules/konva/lib/_FullInternals.js","../node_modules/konva/lib/filters/Grayscale.js","../node_modules/konva/lib/filters/Invert.js","../node_modules/konva/lib/filters/Sepia.js","../node_modules/konva/lib/filters/Solarize.js","../node_modules/konva/lib/index.js","utils/lazy.ts","classes/bucket.ts","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","classes/createButtonElement.ts","classes/doStuff.ts","index.ts"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","var PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nexport const glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexport const Konva = {\n    _global: glob,\n    version: '8.3.5',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle(angle) {\n        return Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    pointerEventsEnabled: true,\n    autoDrawEnabled: true,\n    hitOnDragEnabled: false,\n    capturePointerEventsEnabled: false,\n    _mouseListenClick: false,\n    _touchListenClick: false,\n    _pointerListenClick: false,\n    _mouseInDblClickWindow: false,\n    _touchInDblClickWindow: false,\n    _pointerInDblClickWindow: false,\n    _mouseDblClickPointerId: null,\n    _touchDblClickPointerId: null,\n    _pointerDblClickPointerId: null,\n    pixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging() {\n        return Konva['DD'].isDragging;\n    },\n    isDragReady() {\n        return !!Konva['DD'].node;\n    },\n    document: glob.document,\n    _injectGlobal(Konva) {\n        glob.Konva = Konva;\n    },\n};\nexport const _registerNode = (NodeClass) => {\n    Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\nKonva._injectGlobal(Konva);\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { Konva } from './Global.js';\nexport class Transform {\n    constructor(m = [1, 0, 0, 1, 0, 0]) {\n        this.dirty = false;\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    reset() {\n        this.m[0] = 1;\n        this.m[1] = 0;\n        this.m[2] = 0;\n        this.m[3] = 1;\n        this.m[4] = 0;\n        this.m[5] = 0;\n    }\n    copy() {\n        return new Transform(this.m);\n    }\n    copyInto(tr) {\n        tr.m[0] = this.m[0];\n        tr.m[1] = this.m[1];\n        tr.m[2] = this.m[2];\n        tr.m[3] = this.m[3];\n        tr.m[4] = this.m[4];\n        tr.m[5] = this.m[5];\n    }\n    point(point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5],\n        };\n    }\n    translate(x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    }\n    scale(sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    }\n    rotate(rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    getTranslation() {\n        return {\n            x: this.m[4],\n            y: this.m[5],\n        };\n    }\n    skew(sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    multiply(matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    }\n    invert() {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    }\n    getMatrix() {\n        return this.m;\n    }\n    setAbsolutePosition(x, y) {\n        var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n        return this.translate(xt, yt);\n    }\n    decompose() {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        let result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0,\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = Util._getRotation(result.rotation);\n        return result;\n    }\n}\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5],\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nconst req = (typeof requestAnimationFrame !== 'undefined' && requestAnimationFrame) ||\n    function (f) {\n        setTimeout(f, 60);\n    };\nexport const Util = {\n    _isElement(obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction(obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject(obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber(obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject(val) {\n        return val instanceof Object;\n    },\n    isValidSelector(selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign(number) {\n        if (number === 0) {\n            return 1;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame(callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            req(function () {\n                const queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement() {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement() {\n        return document.createElement('img');\n    },\n    _isInDocument(el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _urlToImage(url, callback) {\n        var imageObj = Util.createImageElement();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex(r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb(hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255,\n        };\n    },\n    getRandomColor() {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    getRGB(color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2],\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10),\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n    },\n    colorToRGBA(str) {\n        str = str || 'black';\n        return (Util._namedColorToRBA(str) ||\n            Util._hex3ColorToRGBA(str) ||\n            Util._hex6ColorToRGBA(str) ||\n            Util._rgbColorToRGBA(str) ||\n            Util._rgbaColorToRGBA(str) ||\n            Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA(str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1,\n        };\n    },\n    _rgbColorToRGBA(str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1,\n            };\n        }\n    },\n    _rgbaColorToRGBA(str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map((n, index) => {\n                if (n.slice(-1) === '%') {\n                    return index === 3 ? parseInt(n) / 100 : (parseInt(n) / 100) * 255;\n                }\n                return Number(n);\n            });\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3],\n            };\n        }\n    },\n    _hex6ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1,\n            };\n        }\n    },\n    _hex3ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1,\n            };\n        }\n    },\n    _hslColorToRGBA(str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            const [_, ...hsl] = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str);\n            const h = Number(hsl[0]) / 360;\n            const s = Number(hsl[1]) / 100;\n            const l = Number(hsl[2]) / 100;\n            let t2;\n            let t3;\n            let val;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1,\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            const t1 = 2 * l - t2;\n            const rgb = [0, 0, 0];\n            for (let i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1,\n            };\n        }\n    },\n    haveIntersection(r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject(obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray(arr) {\n        return arr.slice(0);\n    },\n    degToRad(deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    radToDeg(rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _degToRad(deg) {\n        Util.warn('Util._degToRad is removed. Please use public Util.degToRad instead.');\n        return Util.degToRad(deg);\n    },\n    _radToDeg(rad) {\n        Util.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.');\n        return Util.radToDeg(rad);\n    },\n    _getRotation(radians) {\n        return Konva.angleDeg ? Util.radToDeg(radians) : radians;\n    },\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw(str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error(str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn(str) {\n        if (!Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    each(obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange(val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine(pt, line, isClosed) {\n        var pc = Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween(startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1],\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1],\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify(obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign(target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId(evt) {\n        if (!evt.touches) {\n            return evt.pointerId || 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    },\n};\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nfunction _formatValue(val) {\n    if (Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nexport function RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexport function alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexport function getNumberValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isNumber(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrArrayOfNumbersValidator(noOfElements) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            let isNumber = Util._isNumber(val);\n            let isValidArray = Util._isArray(val) && val.length == noOfElements;\n            if (!isNumber && !isValidArray) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or Array<number>(' +\n                    noOfElements +\n                    ')');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrAutoValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isString(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringOrGradientValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            const isString = Util._isString(val);\n            const isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]' ||\n                (val && val.addColorStop);\n            if (!(isString || isGradient)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string or a native gradient.');\n            }\n            return val;\n        };\n    }\n}\nexport function getFunctionValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isFunction(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberArrayValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isArray(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util._isNumber(item)) {\n                        Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexport function getBooleanValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexport function getComponentValidator(components) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util.isObject(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\n","import { Util } from './Util.js';\nimport { getComponentValidator } from './Validators.js';\nvar GET = 'get', SET = 'set';\nexport const Factory = {\n    addGetterSetter(constructor, attr, def, validator, after) {\n        Factory.addGetter(constructor, attr, def);\n        Factory.addSetter(constructor, attr, validator, after);\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter(constructor, attr, def) {\n        var method = GET + Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter(constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter(constructor, attr) {\n        var capitalizedAttr = Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter(constructor, attr, def, validator) {\n        Util.error('Adding deprecated ' + attr);\n        var method = GET + Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        Factory.addSetter(constructor, attr, validator, function () {\n            Util.error(message);\n        });\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat(constructor, methods) {\n        Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter() {\n        this._filterUpToDate = false;\n    },\n};\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import { Util } from './Util.js';\nimport { Konva } from './Global.js';\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nexport class Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip() {\n        this._context.clip();\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y) {\n        return this._context.isPointInPath(x, y);\n    }\n    fill(path2d) {\n        if (path2d) {\n            this._context.fill(path2d);\n        }\n        else {\n            this._context.fill();\n        }\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nexport class SceneContext extends Context {\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexport class HitContext extends Context {\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n","import { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nexport class Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport class SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.context = new SceneContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexport class HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\n","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nexport const DD = {\n    get isDragging() {\n        var flag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        DD._dragElements.forEach((elem) => {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag(evt) {\n        const nodesToFireEvents = [];\n        DD._dragElements.forEach((elem, key) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util._getFirstPointerId(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            nodesToFireEvents.push(node);\n        });\n        nodesToFireEvents.forEach((node) => {\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt,\n            }, true);\n        });\n    },\n    _endDragBefore(evt) {\n        DD._dragElements.forEach((elem) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                DD.justDragged = true;\n                Konva._mouseListenClick = false;\n                Konva._touchListenClick = false;\n                Konva._pointerListenClick = false;\n                elem.dragStatus = 'stopped';\n            }\n            const drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.batchDraw();\n            }\n        });\n    },\n    _endDragAfter(evt) {\n        DD._dragElements.forEach((elem, key) => {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt,\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                DD._dragElements.delete(key);\n            }\n        });\n    },\n};\nif (Konva.isBrowser) {\n    window.addEventListener('mouseup', DD._endDragBefore, true);\n    window.addEventListener('touchend', DD._endDragBefore, true);\n    window.addEventListener('mousemove', DD._drag);\n    window.addEventListener('touchmove', DD._drag);\n    window.addEventListener('mouseup', DD._endDragAfter, false);\n    window.addEventListener('touchend', DD._endDragAfter, false);\n}\n","import { Util, Transform } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { Konva } from './Global.js';\nimport { DD } from './DragAndDrop.js';\nimport { getNumberValidator, getStringValidator, getBooleanValidator, } from './Validators.js';\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ALL_LISTENERS = 'allEventListeners', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE);\nlet idCounter = 1;\nexport class Node {\n    constructor(config) {\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this._allEventListeners = null;\n        this.parent = null;\n        this._cache = new Map();\n        this._attachedDepsListeners = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this._dragEventId = null;\n        this._shouldFireChangeEvents = false;\n        this.setAttrs(config);\n        this._shouldFireChangeEvents = true;\n    }\n    hasChildren() {\n        return false;\n    }\n    _clearCache(attr) {\n        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) &&\n            this._cache.get(attr)) {\n            this._cache.get(attr).dirty = true;\n        }\n        else if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    }\n    _getCache(attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        var isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n        var invalid = cache === undefined || (isTransform && cache.dirty === true);\n        if (invalid) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    }\n    _calculate(name, deps, getter) {\n        if (!this._attachedDepsListeners.get(name)) {\n            const depsString = deps.map((dep) => dep + 'Change.konva').join(SPACE);\n            this.on(depsString, () => {\n                this._clearCache(name);\n            });\n            this._attachedDepsListeners.set(name, true);\n        }\n        return this._getCache(name, getter);\n    }\n    _getCanvasCache() {\n        return this._cache.get(CANVAS);\n    }\n    _clearSelfAndDescendantCache(attr) {\n        this._clearCache(attr);\n        if (attr === ABSOLUTE_TRANSFORM) {\n            this.fire('absoluteTransformChange');\n        }\n    }\n    clearCache() {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        this._requestDraw();\n        return this;\n    }\n    cache(config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? Math.floor(rect.x) : conf.x, y = conf.y === undefined ? Math.floor(rect.y) : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;\n        if (!width || !height) {\n            Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2 + 1;\n        height += offset * 2 + 1;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new HitCanvas({\n            pixelRatio: hitCanvasPixelRatio,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        cachedSceneCanvas.isCache = true;\n        this._cache.delete(CANVAS);\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this);\n        this.drawHit(cachedHitCanvas, this);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        this._requestDraw();\n        return this;\n    }\n    isCached() {\n        return this._cache.has(CANVAS);\n    }\n    getClientRect(config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    }\n    _transformedRect(rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    _drawCachedSceneCanvas(context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        const canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    }\n    _drawCachedHitCanvas(context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);\n        context.restore();\n    }\n    _getCachedSceneCanvas() {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    }\n    on(evtStr, handler) {\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    }\n    off(evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    }\n    dispatchEvent(evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    }\n    addEventListener(type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    }\n    removeEventListener(type) {\n        this.off(type);\n        return this;\n    }\n    _delegate(event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    }\n    remove() {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    }\n    _clearCaches() {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    }\n    _remove() {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    }\n    destroy() {\n        this.remove();\n        return this;\n    }\n    getAttr(attr) {\n        var method = 'get' + Util._capitalize(attr);\n        if (Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    }\n    getAncestors() {\n        var parent = this.getParent(), ancestors = [];\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    }\n    getAttrs() {\n        return this.attrs || {};\n    }\n    setAttrs(config) {\n        this._batchTransformChanges(() => {\n            var key, method;\n            if (!config) {\n                return this;\n            }\n            for (key in config) {\n                if (key === CHILDREN) {\n                    continue;\n                }\n                method = SET + Util._capitalize(key);\n                if (Util._isFunction(this[method])) {\n                    this[method](config[key]);\n                }\n                else {\n                    this._setAttr(key, config[key]);\n                }\n            }\n        });\n        return this;\n    }\n    isListening() {\n        return this._getCache(LISTENING, this._isListening);\n    }\n    _isListening(relativeTo) {\n        const listening = this.listening();\n        if (!listening) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isListening(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    isVisible() {\n        return this._getCache(VISIBLE, this._isVisible);\n    }\n    _isVisible(relativeTo) {\n        const visible = this.visible();\n        if (!visible) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isVisible(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    shouldDrawHit(top, skipDragCheck = false) {\n        if (top) {\n            return this._isVisible(top) && this._isListening(top);\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus !== 'dragging') {\n                return;\n            }\n            else if (elem.node.nodeType === 'Stage') {\n                layerUnderDrag = true;\n            }\n            else if (elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !skipDragCheck && !Konva.hitOnDragEnabled && layerUnderDrag;\n        return this.isListening() && this.isVisible() && !dragSkip;\n    }\n    show() {\n        this.visible(true);\n        return this;\n    }\n    hide() {\n        this.visible(false);\n        return this;\n    }\n    getZIndex() {\n        return this.index || 0;\n    }\n    getAbsoluteZIndex() {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().slice());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    }\n    getDepth() {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    }\n    _batchTransformChanges(func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        }\n        this._needClearTransformCache = false;\n    }\n    setPosition(pos) {\n        this._batchTransformChanges(() => {\n            this.x(pos.x);\n            this.y(pos.y);\n        });\n        return this;\n    }\n    getPosition() {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    }\n    getRelativePointerPosition() {\n        if (!this.getStage()) {\n            return null;\n        }\n        var pos = this.getStage().getPointerPosition();\n        if (!pos) {\n            return null;\n        }\n        var transform = this.getAbsoluteTransform().copy();\n        transform.invert();\n        return transform.point(pos);\n    }\n    getAbsolutePosition(top) {\n        let haveCachedParent = false;\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    }\n    setAbsolutePosition(pos) {\n        var origTrans = this._clearTransform();\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        var it = this._getAbsoluteTransform().copy();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        this._clearCache(TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        return this;\n    }\n    _setTransform(trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    }\n    _clearTransform() {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    }\n    move(change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    }\n    _eachAncestorReverse(func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    }\n    rotate(theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    }\n    moveToTop() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.push(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveUp() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveDown() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    setZIndex(zIndex) {\n        if (!this.parent) {\n            Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    }\n    getAbsoluteOpacity() {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    }\n    _getAbsoluteOpacity() {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    }\n    moveTo(newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    }\n    toObject() {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util.isObject(val) && !Util._isPlainObject(val) && !Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util._prepareToStringify(obj);\n    }\n    toJSON() {\n        return JSON.stringify(this.toObject());\n    }\n    getParent() {\n        return this.parent;\n    }\n    findAncestors(selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    }\n    isAncestorOf(node) {\n        return false;\n    }\n    findAncestor(selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    }\n    _isMatch(selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util.isValidSelector(sel)) {\n                Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getLayer() {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    }\n    getStage() {\n        return this._getCache(STAGE, this._getStage);\n    }\n    _getStage() {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    }\n    fire(eventType, evt = {}, bubble) {\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    }\n    getAbsoluteTransform(top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    }\n    _getAbsoluteTransform(top) {\n        var at;\n        if (top) {\n            at = new Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            at = this._cache.get(ABSOLUTE_TRANSFORM) || new Transform();\n            if (this.parent) {\n                this.parent.getAbsoluteTransform().copyInto(at);\n            }\n            else {\n                at.reset();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                const x = this.attrs.x || 0;\n                const y = this.attrs.y || 0;\n                const offsetX = this.attrs.offsetX || 0;\n                const offsetY = this.attrs.offsetY || 0;\n                at.translate(x - offsetX, y - offsetY);\n            }\n            at.dirty = false;\n            return at;\n        }\n    }\n    getAbsoluteScale(top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        const transform = this.getAbsoluteTransform(top);\n        const attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    }\n    getAbsoluteRotation() {\n        return this.getAbsoluteTransform().decompose().rotation;\n    }\n    getTransform() {\n        return this._getCache(TRANSFORM, this._getTransform);\n    }\n    _getTransform() {\n        var _a, _b;\n        var m = this._cache.get(TRANSFORM) || new Transform();\n        m.reset();\n        var x = this.x(), y = this.y(), rotation = Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        m.dirty = false;\n        return m;\n    }\n    clone(obj) {\n        var attrs = Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : Math.floor(box.x), y = config.y !== undefined ? config.y : Math.floor(box.y), pixelRatio = config.pixelRatio || 1, canvas = new SceneCanvas({\n            width: config.width || Math.ceil(box.width) || (stage ? stage.width() : 0),\n            height: config.height ||\n                Math.ceil(box.height) ||\n                (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    }\n    toCanvas(config) {\n        return this._toKonvaCanvas(config)._canvas;\n    }\n    toDataURL(config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    }\n    toImage(config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    }\n    setSize(size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    }\n    getSize() {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    }\n    getClassName() {\n        return this.className || this.nodeType;\n    }\n    getType() {\n        return this.nodeType;\n    }\n    getDragDistance() {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Konva.dragDistance;\n        }\n    }\n    _off(type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    _fireChangeEvent(attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    }\n    addName(name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.name(newName);\n        }\n        return this;\n    }\n    hasName(name) {\n        if (!name) {\n            return false;\n        }\n        const fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    }\n    removeName(name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.name(names.join(' '));\n        }\n        return this;\n    }\n    setAttr(attr, val) {\n        var func = this[SET + Util._capitalize(attr)];\n        if (Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    }\n    _requestDraw() {\n        if (Konva.autoDrawEnabled) {\n            const drawNode = this.getLayer() || this.getStage();\n            drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();\n        }\n    }\n    _setAttr(key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        if (this._shouldFireChangeEvents) {\n            this._fireChangeEvent(key, oldVal, val);\n        }\n        this._requestDraw();\n    }\n    _setComponentAttr(key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    }\n    _fireAndBubble(eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    }\n    _getProtoListeners(eventType) {\n        let listeners = this._cache.get(ALL_LISTENERS);\n        if (!listeners) {\n            listeners = {};\n            let obj = Object.getPrototypeOf(this);\n            while (obj) {\n                if (!obj.eventListeners) {\n                    obj = Object.getPrototypeOf(obj);\n                    continue;\n                }\n                for (var event in obj.eventListeners) {\n                    const newEvents = obj.eventListeners[event];\n                    const oldEvents = listeners[event] || [];\n                    listeners[event] = newEvents.concat(oldEvents);\n                }\n                obj = Object.getPrototypeOf(obj);\n            }\n            this._cache.set(ALL_LISTENERS, listeners);\n        }\n        return listeners[eventType];\n    }\n    _fire(eventType, evt) {\n        evt = evt || {};\n        evt.currentTarget = this;\n        evt.type = eventType;\n        const topListeners = this._getProtoListeners(eventType);\n        if (topListeners) {\n            for (var i = 0; i < topListeners.length; i++) {\n                topListeners[i].handler.call(this, evt);\n            }\n        }\n        const selfListeners = this.eventListeners[eventType];\n        if (selfListeners) {\n            for (var i = 0; i < selfListeners.length; i++) {\n                selfListeners[i].handler.call(this, evt);\n            }\n        }\n    }\n    draw() {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    }\n    _createDragElement(evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId,\n        });\n    }\n    startDrag(evt, bubbleEvent = true) {\n        if (!DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        const elem = DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, bubbleEvent);\n    }\n    _setDragPosition(evt, elem) {\n        const pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            const bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            this._requestDraw();\n        }\n        this._lastPos = newNodePos;\n    }\n    stopDrag(evt) {\n        const elem = DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DD._endDragBefore(evt);\n        DD._endDragAfter(evt);\n    }\n    setDraggable(draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    }\n    isDragging() {\n        const elem = DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    }\n    _listenDrag() {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DD._dragElements.forEach((elem) => {\n                if (this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    }\n    _dragChange() {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (!stage) {\n                return;\n            }\n            const dragElement = DD._dragElements.get(this._id);\n            const isDragging = dragElement && dragElement.dragStatus === 'dragging';\n            const isReady = dragElement && dragElement.dragStatus === 'ready';\n            if (isDragging) {\n                this.stopDrag();\n            }\n            else if (isReady) {\n                DD._dragElements.delete(this._id);\n            }\n        }\n    }\n    _dragCleanup() {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    }\n    isClientRectOnScreen(margin = { x: 0, y: 0 }) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const screenRect = {\n            x: -margin.x,\n            y: -margin.y,\n            width: stage.width() + 2 * margin.x,\n            height: stage.height() + 2 * margin.y,\n        };\n        return Util.haveIntersection(screenRect, this.getClientRect());\n    }\n    static create(data, container) {\n        if (Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    }\n    static _createNode(obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Konva[className]) {\n            Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        const Class = Konva[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    }\n}\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n    if (this._batchingTransformChange) {\n        this._needClearTransformCache = true;\n        return;\n    }\n    this._clearCache(TRANSFORM);\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n    this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n    this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nconst addGetterSetter = Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, getNumberValidator());\naddGetterSetter(Node, 'y', 0, getNumberValidator());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', getStringValidator());\naddGetterSetter(Node, 'opacity', 1, getNumberValidator());\naddGetterSetter(Node, 'name', '', getStringValidator());\naddGetterSetter(Node, 'id', '', getStringValidator());\naddGetterSetter(Node, 'rotation', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, getNumberValidator());\naddGetterSetter(Node, 'scaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, getNumberValidator());\naddGetterSetter(Node, 'skewY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, getNumberValidator());\naddGetterSetter(Node, 'offsetY', 0, getNumberValidator());\naddGetterSetter(Node, 'dragDistance', null, getNumberValidator());\naddGetterSetter(Node, 'width', 0, getNumberValidator());\naddGetterSetter(Node, 'height', 0, getNumberValidator());\naddGetterSetter(Node, 'listening', true, getBooleanValidator());\naddGetterSetter(Node, 'preventDefault', true, getBooleanValidator());\naddGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\naddGetterSetter(Node, 'visible', true, getBooleanValidator());\naddGetterSetter(Node, 'transformsEnabled', 'all', getStringValidator());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, getBooleanValidator());\nFactory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}","import { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator } from './Validators.js';\nexport class Container extends Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        if (!filterFunc) {\n            return this.children || [];\n        }\n        const children = this.children || [];\n        var results = [];\n        children.forEach(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        var retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        var obj = Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        var node = Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        var arr = [];\n        this.find('Shape').forEach(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        var caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top) {\n        var _a;\n        var context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                var clipX = this.clipX();\n                var clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config) {\n        var _a;\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        var that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\nFactory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\nFactory.addGetterSetter(Container, 'clipX', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipY', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipWidth', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipHeight', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipFunc');\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { Konva } from './Global.js';\nconst Captures = new Map();\nconst SUPPORT_POINTER_EVENTS = Konva._global['PointerEvent'] !== undefined;\nexport function getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexport function createEvent(evt) {\n    return {\n        evt,\n        pointerId: evt.pointerId,\n    };\n}\nexport function hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexport function setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    const stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexport function releaseCapture(pointerId, target) {\n    const shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    const stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\n","import { Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Container } from './Container.js';\nimport { Konva } from './Global.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { DD } from './DragAndDrop.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', POINTEROUT = 'pointerout', POINTERLEAVE = 'pointerleave', POINTEROVER = 'pointerover', POINTERENTER = 'pointerenter', CONTEXTMENU = 'contextmenu', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TOUCHMOVE = 'touchmove', TOUCHCANCEL = 'touchcancel', WHEEL = 'wheel', MAX_LAYERS_NUMBER = 5, EVENTS = [\n    [MOUSEENTER, '_pointerenter'],\n    [MOUSEDOWN, '_pointerdown'],\n    [MOUSEMOVE, '_pointermove'],\n    [MOUSEUP, '_pointerup'],\n    [MOUSELEAVE, '_pointerleave'],\n    [TOUCHSTART, '_pointerdown'],\n    [TOUCHMOVE, '_pointermove'],\n    [TOUCHEND, '_pointerup'],\n    [TOUCHCANCEL, '_pointercancel'],\n    [MOUSEOVER, '_pointerover'],\n    [WHEEL, '_wheel'],\n    [CONTEXTMENU, '_contextmenu'],\n    [POINTERDOWN, '_pointerdown'],\n    [POINTERMOVE, '_pointermove'],\n    [POINTERUP, '_pointerup'],\n    [POINTERCANCEL, '_pointercancel'],\n    [LOSTPOINTERCAPTURE, '_lostpointercapture'],\n];\nconst EVENTS_MAP = {\n    mouse: {\n        [POINTEROUT]: MOUSEOUT,\n        [POINTERLEAVE]: MOUSELEAVE,\n        [POINTEROVER]: MOUSEOVER,\n        [POINTERENTER]: MOUSEENTER,\n        [POINTERMOVE]: MOUSEMOVE,\n        [POINTERDOWN]: MOUSEDOWN,\n        [POINTERUP]: MOUSEUP,\n        [POINTERCANCEL]: 'mousecancel',\n        pointerclick: 'click',\n        pointerdblclick: 'dblclick',\n    },\n    touch: {\n        [POINTEROUT]: 'touchout',\n        [POINTERLEAVE]: 'touchleave',\n        [POINTEROVER]: 'touchover',\n        [POINTERENTER]: 'touchenter',\n        [POINTERMOVE]: TOUCHMOVE,\n        [POINTERDOWN]: TOUCHSTART,\n        [POINTERUP]: TOUCHEND,\n        [POINTERCANCEL]: TOUCHCANCEL,\n        pointerclick: 'tap',\n        pointerdblclick: 'dbltap',\n    },\n    pointer: {\n        [POINTEROUT]: POINTEROUT,\n        [POINTERLEAVE]: POINTERLEAVE,\n        [POINTEROVER]: POINTEROVER,\n        [POINTERENTER]: POINTERENTER,\n        [POINTERMOVE]: POINTERMOVE,\n        [POINTERDOWN]: POINTERDOWN,\n        [POINTERUP]: POINTERUP,\n        [POINTERCANCEL]: POINTERCANCEL,\n        pointerclick: 'pointerclick',\n        pointerdblclick: 'pointerdblclick',\n    },\n};\nconst getEventType = (type) => {\n    if (type.indexOf('pointer') >= 0) {\n        return 'pointer';\n    }\n    if (type.indexOf('touch') >= 0) {\n        return 'touch';\n    }\n    return 'mouse';\n};\nconst getEventsMap = (eventType) => {\n    const type = getEventType(eventType);\n    if (type === 'pointer') {\n        return Konva.pointerEventsEnabled && EVENTS_MAP.pointer;\n    }\n    if (type === 'touch') {\n        return EVENTS_MAP.touch;\n    }\n    if (type === 'mouse') {\n        return EVENTS_MAP.mouse;\n    }\n};\nfunction checkNoClip(attrs = {}) {\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nconst NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;\nexport const stages = [];\nexport class Stage extends Container {\n    constructor(config) {\n        super(checkNoClip(config));\n        this._pointerPositions = [];\n        this._changedPointerPositions = [];\n        this._buildDOM();\n        this._bindContentEvents();\n        stages.push(this);\n        this.on('widthChange.konva heightChange.konva', this._resizeDOM);\n        this.on('visibleChange.konva', this._checkVisibility);\n        this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', () => {\n            checkNoClip(this.attrs);\n        });\n        this._checkVisibility();\n    }\n    _validateAdd(child) {\n        const isLayer = child.getType() === 'Layer';\n        const isFastLayer = child.getType() === 'FastLayer';\n        const valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util.throw('You may only add layers to the stage.');\n        }\n    }\n    _checkVisibility() {\n        if (!this.content) {\n            return;\n        }\n        const style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    }\n    setContainer(container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr('container', container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    }\n    shouldDrawHit() {\n        return true;\n    }\n    clear() {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    }\n    clone(obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container =\n            typeof document !== 'undefined' && document.createElement('div');\n        return Container.prototype.clone.call(this, obj);\n    }\n    destroy() {\n        super.destroy();\n        var content = this.content;\n        if (content && Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = stages.indexOf(this);\n        if (index > -1) {\n            stages.splice(index, 1);\n        }\n        return this;\n    }\n    getPointerPosition() {\n        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n    _getPointerById(id) {\n        return this._pointerPositions.find((p) => p.id === id);\n    }\n    getPointersPositions() {\n        return this._pointerPositions;\n    }\n    getStage() {\n        return this;\n    }\n    getContent() {\n        return this.content;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.x = config.x || 0;\n        config.y = config.y || 0;\n        config.width = config.width || this.width();\n        config.height = config.height || this.height();\n        var canvas = new SceneCanvas({\n            width: config.width,\n            height: config.height,\n            pixelRatio: config.pixelRatio || 1,\n        });\n        var _context = canvas.getContext()._context;\n        var layers = this.children;\n        if (config.x || config.y) {\n            _context.translate(-1 * config.x, -1 * config.y);\n        }\n        layers.forEach(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    }\n    getIntersection(pos) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n;\n        for (n = end; n >= 0; n--) {\n            const shape = layers[n].getIntersection(pos);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    }\n    _resizeDOM() {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.forEach((layer) => {\n            layer.setSize({ width, height });\n            layer.draw();\n        });\n    }\n    add(layer, ...rest) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        super.add(layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    }\n    getParent() {\n        return null;\n    }\n    getLayer() {\n        return null;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n    getLayers() {\n        return this.children;\n    }\n    _bindContentEvents() {\n        if (!Konva.isBrowser) {\n            return;\n        }\n        EVENTS.forEach(([event, methodName]) => {\n            this.content.addEventListener(event, (evt) => {\n                this[methodName](evt);\n            });\n        });\n    }\n    _pointerenter(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerenter, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _pointerover(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerover, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _getTargetShape(evenType) {\n        let shape = this[evenType + 'targetShape'];\n        if (shape && !shape.getStage()) {\n            shape = null;\n        }\n        return shape;\n    }\n    _pointerleave(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var targetShape = this._getTargetShape(eventType);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(events.pointerout, { evt: evt });\n            targetShape._fireAndBubble(events.pointerleave, { evt: evt });\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this[eventType + 'targetShape'] = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this._fire(events.pointerout, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n    }\n    _pointerdown(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            var shape = this.getIntersection(pos);\n            DD.justDragged = false;\n            Konva['_' + eventType + 'ListenClick'] = true;\n            const hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Konva.capturePointerEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            this[eventType + 'ClickStartShape'] = shape;\n            shape._fireAndBubble(events.pointerdown, {\n                evt: evt,\n                pointerId: pos.id,\n            });\n            triggeredOnShape = true;\n            const isTouch = evt.type.indexOf('touch') >= 0;\n            if (shape.preventDefault() && evt.cancelable && isTouch) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerdown, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._pointerPositions[0].id,\n            });\n        }\n    }\n    _pointermove(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        if (DD.isDragging && DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (!eventsEnabled) {\n            return;\n        }\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        var targetShape = this._getTargetShape(eventType);\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            var differentTarget = targetShape !== shape;\n            if (differentTarget && targetShape) {\n                targetShape._fireAndBubble(events.pointerout, Object.assign({}, event), shape);\n                targetShape._fireAndBubble(events.pointerleave, Object.assign({}, event), shape);\n            }\n            if (shape) {\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                if (differentTarget) {\n                    shape._fireAndBubble(events.pointerover, Object.assign({}, event), targetShape);\n                    shape._fireAndBubble(events.pointerenter, Object.assign({}, event), targetShape);\n                    this[eventType + 'targetShape'] = shape;\n                }\n                shape._fireAndBubble(events.pointermove, Object.assign({}, event));\n            }\n            else {\n                if (targetShape) {\n                    this._fire(events.pointerover, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                    this[eventType + 'targetShape'] = null;\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointermove, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n    }\n    _pointerup(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const clickStartShape = this[eventType + 'ClickStartShape'];\n        const clickEndShape = this[eventType + 'ClickEndShape'];\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            if (shape) {\n                shape.releaseCapture(pos.id);\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            let fireDblClick = false;\n            if (Konva['_' + eventType + 'InDblClickWindow']) {\n                fireDblClick = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            else if (!DD.justDragged) {\n                Konva['_' + eventType + 'InDblClickWindow'] = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            this[eventType + 'DblTimeout'] = setTimeout(function () {\n                Konva['_' + eventType + 'InDblClickWindow'] = false;\n            }, Konva.dblClickWindow);\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                this[eventType + 'ClickEndShape'] = shape;\n                shape._fireAndBubble(events.pointerup, Object.assign({}, event));\n                if (Konva['_' + eventType + 'ListenClick'] &&\n                    clickStartShape &&\n                    clickStartShape === shape) {\n                    shape._fireAndBubble(events.pointerclick, Object.assign({}, event));\n                    if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                        shape._fireAndBubble(events.pointerdblclick, Object.assign({}, event));\n                    }\n                }\n            }\n            else {\n                this[eventType + 'ClickEndShape'] = null;\n                if (Konva['_' + eventType + 'ListenClick']) {\n                    this._fire(events.pointerclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n                if (fireDblClick) {\n                    this._fire(events.pointerdblclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerup, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n        Konva['_' + eventType + 'ListenClick'] = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    }\n    _contextmenu(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _wheel(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointercancel(evt) {\n        this.setPointersPositions(evt);\n        const shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    _lostpointercapture(evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    setPointersPositions(evt) {\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Array.prototype.forEach.call(evt.touches, (touch) => {\n                this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n            Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {\n                this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y,\n            };\n            this._pointerPositions = [{ x, y, id: Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x, y, id: Util._getFirstPointerId(evt) },\n            ];\n        }\n    }\n    _setPointerPosition(evt) {\n        Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    }\n    _getContentPosition() {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1,\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1,\n        };\n    }\n    _buildDOM() {\n        this.bufferCanvas = new SceneCanvas({\n            width: this.width(),\n            height: this.height(),\n        });\n        this.bufferHitCanvas = new HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height(),\n        });\n        if (!Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = '';\n        this.content = document.createElement('div');\n        this.content.style.position = 'relative';\n        this.content.style.userSelect = 'none';\n        this.content.className = 'konvajs-content';\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    }\n    cache() {\n        Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    }\n    clearCache() {\n        return this;\n    }\n    batchDraw() {\n        this.getChildren().forEach(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    }\n}\nStage.prototype.nodeType = STAGE;\n_registerNode(Stage);\nFactory.addGetterSetter(Stage, 'container');\n","import { Konva } from './Global.js';\nimport { Transform, Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator, getNumberOrAutoValidator, getStringValidator, getBooleanValidator, getStringOrGradientValidator, } from './Validators.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexport const shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nexport class Shape extends Node {\n    constructor(config) {\n        super(config);\n        let key;\n        while (true) {\n            key = Util.getRandomColor();\n            if (key && !(key in shapes)) {\n                break;\n            }\n        }\n        this.colorKey = key;\n        shapes[key] = this;\n    }\n    getContext() {\n        Util.warn('shape.getContext() method is deprecated. Please do not use it.');\n        return this.getLayer().getContext();\n    }\n    getCanvas() {\n        Util.warn('shape.getCanvas() method is deprecated. Please do not use it.');\n        return this.getLayer().getCanvas();\n    }\n    getSceneFunc() {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    }\n    getHitFunc() {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    }\n    hasShadow() {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    }\n    _hasShadow() {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    }\n    _getFillPattern() {\n        return this._getCache(patternImage, this.__getFillPattern);\n    }\n    __getFillPattern() {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            if (pattern && pattern.setTransform) {\n                const tr = new Transform();\n                tr.translate(this.fillPatternX(), this.fillPatternY());\n                tr.rotate(Konva.getAngle(this.fillPatternRotation()));\n                tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());\n                tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());\n                const m = tr.getMatrix();\n                const matrix = typeof DOMMatrix === 'undefined'\n                    ? {\n                        a: m[0],\n                        b: m[1],\n                        c: m[2],\n                        d: m[3],\n                        e: m[4],\n                        f: m[5],\n                    }\n                    : new DOMMatrix(m);\n                pattern.setTransform(matrix);\n            }\n            return pattern;\n        }\n    }\n    _getLinearGradient() {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    }\n    __getLinearGradient() {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    _getRadialGradient() {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    }\n    __getRadialGradient() {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    getShadowRGBA() {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    }\n    _getShadowRGBA() {\n        if (this.hasShadow()) {\n            var rgba = Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    }\n    hasFill() {\n        return this._calculate('hasFill', [\n            'fillEnabled',\n            'fill',\n            'fillPatternImage',\n            'fillLinearGradientColorStops',\n            'fillRadialGradientColorStops',\n        ], () => {\n            return (this.fillEnabled() &&\n                !!(this.fill() ||\n                    this.fillPatternImage() ||\n                    this.fillLinearGradientColorStops() ||\n                    this.fillRadialGradientColorStops()));\n        });\n    }\n    hasStroke() {\n        return this._calculate('hasStroke', [\n            'strokeEnabled',\n            'strokeWidth',\n            'stroke',\n            'strokeLinearGradientColorStops',\n        ], () => {\n            return (this.strokeEnabled() &&\n                this.strokeWidth() &&\n                !!(this.stroke() || this.strokeLinearGradientColorStops()));\n        });\n    }\n    hasHitStroke() {\n        const width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    }\n    intersects(point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas, null, true);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    }\n    destroy() {\n        Node.prototype.destroy.call(this);\n        delete shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    }\n    _useBufferCanvas(forceFill) {\n        var _a;\n        if (!this.getStage()) {\n            return false;\n        }\n        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n        if (!perfectDrawEnabled) {\n            return false;\n        }\n        const hasFill = forceFill || this.hasFill();\n        const hasStroke = this.hasStroke();\n        const isTransparent = this.getAbsoluteOpacity() !== 1;\n        if (hasFill && hasStroke && isTransparent) {\n            return true;\n        }\n        const hasShadow = this.hasShadow();\n        const strokeForShadow = this.shadowForStrokeEnabled();\n        if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n            return true;\n        }\n        return false;\n    }\n    setStrokeHitEnabled(val) {\n        Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    }\n    getStrokeHitEnabled() {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    getSelfRect() {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height,\n        };\n    }\n    getClientRect(config = {}) {\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo;\n        const fillRect = this.getSelfRect();\n        const applyStroke = !config.skipStroke && this.hasStroke();\n        const strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        const fillAndStrokeWidth = fillRect.width + strokeWidth;\n        const fillAndStrokeHeight = fillRect.height + strokeWidth;\n        const applyShadow = !config.skipShadow && this.hasShadow();\n        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        const blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        const width = preWidth + blurRadius * 2;\n        const height = preHeight + blurRadius * 2;\n        const rect = {\n            width: width,\n            height: height,\n            x: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y,\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow(), stage, bufferCanvas, bufferContext;\n        var skipBuffer = canvas.isCache;\n        var cachingSelf = top === this;\n        if (!this.isVisible() && !cachingSelf) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas() && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            context._applyOpacity(this);\n            context._applyGlobalCompositeOperation(this);\n            context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!cachingSelf) {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            drawFunc.call(this, context, this);\n        }\n        context.restore();\n        return this;\n    }\n    drawHit(can, top, skipDragCheck = false) {\n        if (!this.shouldDrawHit(top, skipDragCheck)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        const selfCache = this === top;\n        if (!selfCache) {\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    }\n    drawHitFromCache(alphaThreshold = 0) {\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n}\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n_registerNode(Shape);\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\nFactory.addGetterSetter(Shape, 'stroke', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'strokeWidth', 2, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\nFactory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', getNumberOrAutoValidator());\nFactory.addGetterSetter(Shape, 'strokeHitEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'perfectDrawEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'lineJoin');\nFactory.addGetterSetter(Shape, 'lineCap');\nFactory.addGetterSetter(Shape, 'sceneFunc');\nFactory.addGetterSetter(Shape, 'hitFunc');\nFactory.addGetterSetter(Shape, 'dash');\nFactory.addGetterSetter(Shape, 'dashOffset', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowColor', undefined, getStringValidator());\nFactory.addGetterSetter(Shape, 'shadowBlur', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOpacity', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'shadowOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOffsetY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternImage');\nFactory.addGetterSetter(Shape, 'fill', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'fillPatternX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternScaleX', 1, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternScaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc',\n});\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { Node } from './Node.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { getBooleanValidator } from './Validators.js';\nimport { shapes } from './Shape.js';\nimport { _registerNode } from './Global.js';\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nexport class Layer extends Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new SceneCanvas();\n        this.hitCanvas = new HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        var moved = Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        var _canvas = this.getNativeCanvasElement();\n        Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n}\nLayer.prototype.nodeType = 'Layer';\n_registerNode(Layer);\nFactory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory.addGetterSetter(Layer, 'hitGraphEnabled', true, getBooleanValidator());\n","import { Util } from './Util.js';\nimport { Layer } from './Layer.js';\nimport { _registerNode } from './Global.js';\nexport class FastLayer extends Layer {\n    constructor(attrs) {\n        super(attrs);\n        this.listening(false);\n        Util.warn('Konva.Fast layer is deprecated. Please use \"new Konva.Layer({ listening: false })\" instead.');\n    }\n}\nFastLayer.prototype.nodeType = 'FastLayer';\n_registerNode(FastLayer);\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { _registerNode } from './Global.js';\nexport class Group extends Container {\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to groups.');\n        }\n    }\n}\nGroup.prototype.nodeType = 'Group';\n_registerNode(Group);\n","import { glob } from './Global.js';\nimport { Util } from './Util.js';\nvar now = (function () {\n    if (glob.performance && glob.performance.now) {\n        return function () {\n            return glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nexport class Animation {\n    constructor(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0,\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    setLayers(layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    }\n    getLayers() {\n        return this.layers;\n    }\n    addLayer(layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    }\n    isRunning() {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    }\n    start() {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    }\n    stop() {\n        Animation._removeAnimation(this);\n        return this;\n    }\n    _updateFrameObject(time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    }\n    static _addAnimation(anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    }\n    static _removeAnimation(anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    }\n    static _runFrames() {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].batchDraw();\n        }\n    }\n    static _animationLoop() {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            Util.requestAnimFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    }\n    static _handleAnimation() {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            Util.requestAnimFrame(this._animationLoop);\n        }\n    }\n}\nAnimation.animations = [];\nAnimation.animIdCounter = 0;\nAnimation.animRunning = false;\n","import { Util } from './Util.js';\nimport { Animation } from './Animation.js';\nimport { Node } from './Node.js';\nimport { Konva } from './Global.js';\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1,\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nclass TweenEngine {\n    constructor(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    fire(str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    }\n    setTime(t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    }\n    getTime() {\n        return this._time;\n    }\n    setPosition(p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    }\n    getPosition(t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    }\n    play() {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    }\n    reverse() {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    }\n    seek(t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    }\n    reset() {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    }\n    finish() {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    }\n    update() {\n        this.setPosition(this.getPosition(this._time));\n        this.fire('onUpdate');\n    }\n    onEnterFrame() {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    }\n    pause() {\n        this.state = PAUSED;\n        this.fire('onPause');\n    }\n    getTimer() {\n        return new Date().getTime();\n    }\n}\nexport class Tween {\n    constructor(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n        this.onUpdate = config.onUpdate;\n    }\n    _addAttr(key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util.colorToRGBA(start[n]);\n                        endRGBA = Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a,\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util.colorToRGBA(start);\n            endRGBA = Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a,\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart,\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    }\n    _tweenFunc(i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    }\n    _addListeners() {\n        this.tween.onPlay = () => {\n            this.anim.start();\n        };\n        this.tween.onReverse = () => {\n            this.anim.start();\n        };\n        this.tween.onPause = () => {\n            this.anim.stop();\n        };\n        this.tween.onFinish = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (this.onFinish) {\n                this.onFinish.call(this);\n            }\n        };\n        this.tween.onReset = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (this.onReset) {\n                this.onReset();\n            }\n        };\n        this.tween.onUpdate = () => {\n            if (this.onUpdate) {\n                this.onUpdate.call(this);\n            }\n        };\n    }\n    play() {\n        this.tween.play();\n        return this;\n    }\n    reverse() {\n        this.tween.reverse();\n        return this;\n    }\n    reset() {\n        this.tween.reset();\n        return this;\n    }\n    seek(t) {\n        this.tween.seek(t * 1000);\n        return this;\n    }\n    pause() {\n        this.tween.pause();\n        return this;\n    }\n    finish() {\n        this.tween.finish();\n        return this;\n    }\n    destroy() {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    }\n}\nTween.attrs = {};\nTween.tweens = {};\nNode.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexport const Easings = {\n    BackEaseIn(t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut(t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut(t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut(t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn(t, b, c, d) {\n        return c - Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut(t, b, c, d) {\n        if (t < d / 2) {\n            return Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn(t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut(t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn(t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut(t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear(t, b, c, d) {\n        return (c * t) / d + b;\n    },\n};\n","import { Konva as Global } from './Global.js';\nimport { Util, Transform } from './Util.js';\nimport { Node } from './Node.js';\nimport { Container } from './Container.js';\nimport { Stage, stages } from './Stage.js';\nimport { Layer } from './Layer.js';\nimport { FastLayer } from './FastLayer.js';\nimport { Group } from './Group.js';\nimport { DD } from './DragAndDrop.js';\nimport { Shape, shapes } from './Shape.js';\nimport { Animation } from './Animation.js';\nimport { Tween, Easings } from './Tween.js';\nimport { Context } from './Context.js';\nimport { Canvas } from './Canvas.js';\nexport const Konva = Util._assign(Global, {\n    Util,\n    Transform,\n    Node,\n    Container,\n    Stage,\n    stages,\n    Layer,\n    FastLayer,\n    Group,\n    DD,\n    Shape,\n    shapes,\n    Animation,\n    Tween,\n    Easings,\n    Context,\n    Canvas,\n});\nexport default Konva;\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Konva } from '../Global.js';\nimport { getNumberValidator, getBooleanValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Arc extends Shape {\n    _sceneFunc(context) {\n        var angle = Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n    getSelfRect() {\n        const innerRadius = this.innerRadius();\n        const outerRadius = this.outerRadius();\n        const clockwise = this.clockwise();\n        const angle = Konva.getAngle(clockwise ? 360 - this.angle() : this.angle());\n        const boundLeftRatio = Math.cos(Math.min(angle, Math.PI));\n        const boundRightRatio = 1;\n        const boundTopRatio = Math.sin(Math.min(Math.max(Math.PI, angle), (3 * Math.PI) / 2));\n        const boundBottomRatio = Math.sin(Math.min(angle, Math.PI / 2));\n        const boundLeft = boundLeftRatio * (boundLeftRatio > 0 ? innerRadius : outerRadius);\n        const boundRight = boundRightRatio * (boundRightRatio > 0 ? outerRadius : innerRadius);\n        const boundTop = boundTopRatio * (boundTopRatio > 0 ? innerRadius : outerRadius);\n        const boundBottom = boundBottomRatio * (boundBottomRatio > 0 ? outerRadius : innerRadius);\n        return {\n            x: boundLeft,\n            y: clockwise ? -1 * boundBottom : boundTop,\n            width: boundRight - boundLeft,\n            height: boundBottom - boundTop,\n        };\n    }\n}\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Arc);\nFactory.addGetterSetter(Arc, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'outerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'angle', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'clockwise', false, getBooleanValidator());\n","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getNumberArrayValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n}\nfunction expandPoints(p, tension) {\n    var len = p.length, allPoints = [], n, cp;\n    for (n = 2; n < len - 2; n += 2) {\n        cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n        if (isNaN(cp[0])) {\n            continue;\n        }\n        allPoints.push(cp[0]);\n        allPoints.push(cp[1]);\n        allPoints.push(p[n]);\n        allPoints.push(p[n + 1]);\n        allPoints.push(cp[2]);\n        allPoints.push(cp[3]);\n    }\n    return allPoints;\n}\nexport class Line extends Shape {\n    constructor(config) {\n        super(config);\n        this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n    }\n    _sceneFunc(context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    }\n    getTensionPoints() {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    }\n    _getTensionPoints() {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return expandPoints(this.points(), this.tension());\n        }\n    }\n    _getTensionPointsClosed() {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1],\n        ]);\n        return tp;\n    }\n    getWidth() {\n        return this.getSelfRect().width;\n    }\n    getHeight() {\n        return this.getSelfRect().height;\n    }\n    getSelfRect() {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (this.tension() !== 0) {\n            points = [\n                points[0],\n                points[1],\n                ...this._getTensionPoints(),\n                points[points.length - 2],\n                points[points.length - 1],\n            ];\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n}\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n_registerNode(Line);\nFactory.addGetterSetter(Line, 'closed', false);\nFactory.addGetterSetter(Line, 'bezier', false);\nFactory.addGetterSetter(Line, 'tension', 0, getNumberValidator());\nFactory.addGetterSetter(Line, 'points', [], getNumberArrayValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { _registerNode } from '../Global.js';\nexport class Path extends Shape {\n    constructor(config) {\n        super(config);\n        this.dataArray = [];\n        this.pathLength = 0;\n        this.dataArray = Path.parsePathData(this.data());\n        this.pathLength = 0;\n        for (var i = 0; i < this.dataArray.length; ++i) {\n            this.pathLength += this.dataArray[i].pathLength;\n        }\n        this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n    }\n    _sceneFunc(context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    }\n    getSelfRect() {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (let t = start - inc; t > end; t -= inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (let t = start + inc; t < end; t += inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (let t = 0.0; t <= 1; t += 0.01) {\n                    const point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getLength() {\n        return this.pathLength;\n    }\n    getPointAtLength(length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    }\n    static getLineLength(x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    static getPointOnLine(dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise,\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise,\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise,\n            };\n        }\n        return pt;\n    }\n    static getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta),\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi),\n        };\n    }\n    static parsePathData(data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A',\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                if (coords[j] === '00') {\n                    p.push(0, 0);\n                    continue;\n                }\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY,\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points),\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0,\n                });\n            }\n        }\n        return ca;\n    }\n    static calcLength(x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    }\n    static convertEndpointToCenterParameterization(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    }\n}\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n_registerNode(Path);\nFactory.addGetterSetter(Path, 'data');\n","import { Factory } from '../Factory.js';\nimport { Line } from './Line.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nimport { Path } from './Path.js';\nexport class Arrow extends Line {\n    _sceneFunc(ctx) {\n        super._sceneFunc(ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var length = this.pointerLength();\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            const lp = [\n                tp[tp.length - 4],\n                tp[tp.length - 3],\n                tp[tp.length - 2],\n                tp[tp.length - 1],\n                points[n - 2],\n                points[n - 1],\n            ];\n            const lastLength = Path.calcLength(tp[tp.length - 4], tp[tp.length - 3], 'C', lp);\n            const previous = Path.getPointOnQuadraticBezier(Math.min(1, 1 - length / lastLength), lp[0], lp[1], lp[2], lp[3], lp[4], lp[5]);\n            dx = points[n - 2] - previous.x;\n            dy = points[n - 1] - previous.y;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var width = this.pointerWidth();\n        if (this.pointerAtEnding()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[n - 2], points[n - 1]);\n            ctx.rotate(radians);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n    }\n    __fillStroke(ctx) {\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    }\n    getSelfRect() {\n        const lineRect = super.getSelfRect();\n        const offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2,\n        };\n    }\n}\nArrow.prototype.className = 'Arrow';\n_registerNode(Arrow);\nFactory.addGetterSetter(Arrow, 'pointerLength', 10, getNumberValidator());\nFactory.addGetterSetter(Arrow, 'pointerWidth', 10, getNumberValidator());\nFactory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nFactory.addGetterSetter(Arrow, 'pointerAtEnding', true);\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Circle extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    }\n    setHeight(height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    }\n}\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n_registerNode(Circle);\nFactory.addGetterSetter(Circle, 'radius', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Ellipse extends Shape {\n    _sceneFunc(context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radiusX() * 2;\n    }\n    getHeight() {\n        return this.radiusY() * 2;\n    }\n    setWidth(width) {\n        this.radiusX(width / 2);\n    }\n    setHeight(height) {\n        this.radiusY(height / 2);\n    }\n}\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n_registerNode(Ellipse);\nFactory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory.addGetterSetter(Ellipse, 'radiusX', 0, getNumberValidator());\nFactory.addGetterSetter(Ellipse, 'radiusY', 0, getNumberValidator());\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Image extends Shape {\n    constructor(attrs) {\n        super(attrs);\n        this.on('imageChange.konva', () => {\n            this._setImageLoad();\n        });\n        this._setImageLoad();\n    }\n    _setImageLoad() {\n        const image = this.image();\n        if (image && image.complete) {\n            return;\n        }\n        if (image && image.readyState === 4) {\n            return;\n        }\n        if (image && image['addEventListener']) {\n            image['addEventListener']('load', () => {\n                this._requestDraw();\n            });\n        }\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _sceneFunc(context) {\n        const width = this.getWidth();\n        const height = this.getHeight();\n        const image = this.attrs.image;\n        let params;\n        if (image) {\n            const cropWidth = this.attrs.cropWidth;\n            const cropHeight = this.attrs.cropHeight;\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height,\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    }\n    _hitFunc(context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        var _a, _b;\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;\n    }\n    getHeight() {\n        var _a, _b;\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;\n    }\n    static fromURL(url, callback, onError = null) {\n        var img = Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img,\n            });\n            callback(image);\n        };\n        img.onerror = onError;\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    }\n}\nImage.prototype.className = 'Image';\n_registerNode(Image);\nFactory.addGetterSetter(Image, 'image');\nFactory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory.addGetterSetter(Image, 'cropX', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropY', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropHeight', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Group } from '../Group.js';\nimport { getNumberOrArrayOfNumbersValidator, getNumberValidator, } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nexport class Label extends Group {\n    constructor(config) {\n        super(config);\n        this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n    }\n    getText() {\n        return this.find('Text')[0];\n    }\n    getTag() {\n        return this.find('Tag')[0];\n    }\n    _addListeners(text) {\n        var that = this, n;\n        var func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    }\n    getWidth() {\n        return this.getText().width();\n    }\n    getHeight() {\n        return this.getText().height();\n    }\n    _sync() {\n        var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height,\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n            });\n        }\n    }\n}\nLabel.prototype.className = 'Label';\n_registerNode(Label);\nexport class Tag extends Shape {\n    _sceneFunc(context) {\n        var width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = this.cornerRadius();\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.beginPath();\n        context.moveTo(topLeft, 0);\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        context.lineTo(width - topRight, 0);\n        context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        context.lineTo(width, height - bottomRight);\n        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        context.lineTo(bottomLeft, height);\n        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        context.lineTo(0, topLeft);\n        context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getSelfRect() {\n        var x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    }\n}\nTag.prototype.className = 'Tag';\n_registerNode(Tag);\nFactory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory.addGetterSetter(Tag, 'pointerWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Tag, 'pointerHeight', 0, getNumberValidator());\nFactory.addGetterSetter(Tag, 'cornerRadius', 0, getNumberOrArrayOfNumbersValidator(4));\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { _registerNode } from '../Global.js';\nimport { getNumberOrArrayOfNumbersValidator } from '../Validators.js';\nexport class Rect extends Shape {\n    _sceneFunc(context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            let topLeft = 0;\n            let topRight = 0;\n            let bottomLeft = 0;\n            let bottomRight = 0;\n            if (typeof cornerRadius === 'number') {\n                topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n            }\n            else {\n                topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n                topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n                bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n                bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n            }\n            context.moveTo(topLeft, 0);\n            context.lineTo(width - topRight, 0);\n            context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n            context.lineTo(width, height - bottomRight);\n            context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n            context.lineTo(bottomLeft, height);\n            context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n            context.lineTo(0, topLeft);\n            context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n}\nRect.prototype.className = 'Rect';\n_registerNode(Rect);\nFactory.addGetterSetter(Rect, 'cornerRadius', 0, getNumberOrArrayOfNumbersValidator(4));\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class RegularPolygon extends Shape {\n    _sceneFunc(context) {\n        const points = this._getPoints();\n        context.beginPath();\n        context.moveTo(points[0].x, points[0].y);\n        for (var n = 1; n < points.length; n++) {\n            context.lineTo(points[n].x, points[n].y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    _getPoints() {\n        const sides = this.attrs.sides;\n        const radius = this.attrs.radius || 0;\n        const points = [];\n        for (var n = 0; n < sides; n++) {\n            points.push({\n                x: radius * Math.sin((n * 2 * Math.PI) / sides),\n                y: -1 * radius * Math.cos((n * 2 * Math.PI) / sides),\n            });\n        }\n        return points;\n    }\n    getSelfRect() {\n        const points = this._getPoints();\n        var minX = points[0].x;\n        var maxX = points[0].y;\n        var minY = points[0].x;\n        var maxY = points[0].y;\n        points.forEach((point) => {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n_registerNode(RegularPolygon);\nFactory.addGetterSetter(RegularPolygon, 'radius', 0, getNumberValidator());\nFactory.addGetterSetter(RegularPolygon, 'sides', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar PIx2 = Math.PI * 2;\nexport class Ring extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Ring);\nFactory.addGetterSetter(Ring, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Ring, 'outerRadius', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Animation } from '../Animation.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Sprite extends Shape {\n    constructor(config) {\n        super(config);\n        this._updated = true;\n        this.anim = new Animation(() => {\n            var updated = this._updated;\n            this._updated = false;\n            return updated;\n        });\n        this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n    }\n    _sceneFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    }\n    _hitFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _setInterval() {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    }\n    start() {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    }\n    stop() {\n        this.anim.stop();\n        clearInterval(this.interval);\n    }\n    isRunning() {\n        return this.anim.isRunning();\n    }\n    _updateIndex() {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    }\n}\nSprite.prototype.className = 'Sprite';\n_registerNode(Sprite);\nFactory.addGetterSetter(Sprite, 'animation');\nFactory.addGetterSetter(Sprite, 'animations');\nFactory.addGetterSetter(Sprite, 'frameOffsets');\nFactory.addGetterSetter(Sprite, 'image');\nFactory.addGetterSetter(Sprite, 'frameIndex', 0, getNumberValidator());\nFactory.addGetterSetter(Sprite, 'frameRate', 17, getNumberValidator());\nFactory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Star extends Shape {\n    _sceneFunc(context) {\n        var innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (var n = 1; n < numPoints * 2; n++) {\n            var radius = n % 2 === 0 ? outerRadius : innerRadius;\n            var x = radius * Math.sin((n * Math.PI) / numPoints);\n            var y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Star);\nFactory.addGetterSetter(Star, 'numPoints', 5, getNumberValidator());\nFactory.addGetterSetter(Star, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Star, 'outerRadius', 0, getNumberValidator());\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getStringValidator, getNumberOrAutoValidator, getBooleanValidator, } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport function stringToArray(string) {\n    return Array.from(string);\n}\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing',\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nfunction normalizeFontFamily(fontFamily) {\n    return fontFamily\n        .split(',')\n        .map((family) => {\n        family = family.trim();\n        const hasSpace = family.indexOf(' ') >= 0;\n        const hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n        if (hasSpace && !hasQuotes) {\n            family = `\"${family}\"`;\n        }\n        return family;\n    })\n        .join(', ');\n}\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nexport class Text extends Shape {\n    constructor(config) {\n        super(checkDefaultFill(config));\n        this._partialTextX = 0;\n        this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);\n        }\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        var textArr = this.textArr, textArrLen = textArr.length;\n        if (!this.text()) {\n            return;\n        }\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = obj.lastInParagraph, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                var array = stringToArray(text);\n                for (var li = 0; li < array.length; li++) {\n                    var letter = array[li];\n                    if (letter === ' ' && !lastLine && align === JUSTIFY) {\n                        lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX += this.measureSize(letter).width + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    }\n    _hitFunc(context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    setText(text) {\n        var str = Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    }\n    getWidth() {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    }\n    getHeight() {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    measureSize(text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize,\n        };\n    }\n    _getContextFont() {\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            (this.fontSize() + PX_SPACE) +\n            normalizeFontFamily(this.fontFamily()));\n    }\n    _addTextLine(line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({\n            text: line,\n            width: width,\n            lastInParagraph: false,\n        });\n    }\n    _getTextWidth(text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    }\n    _setTextData() {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr;\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            var lastLine = this.textArr[this.textArr.length - 1];\n                            if (lastLine) {\n                                if (shouldAddEllipsis) {\n                                    var haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n                                    if (!haveSpace) {\n                                        lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n                                    }\n                                    this.textArr.splice(this.textArr.length - 1, 1);\n                                    this._addTextLine(lastLine.text + ELLIPSIS);\n                                }\n                            }\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n            if (this.textArr[this.textArr.length - 1]) {\n                this.textArr[this.textArr.length - 1].lastInParagraph = true;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    }\n    getStrokeScaleEnabled() {\n        return true;\n    }\n}\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight',\n    'letterSpacing',\n];\n_registerNode(Text);\nFactory.overWriteSetter(Text, 'width', getNumberOrAutoValidator());\nFactory.overWriteSetter(Text, 'height', getNumberOrAutoValidator());\nFactory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory.addGetterSetter(Text, 'fontSize', 12, getNumberValidator());\nFactory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory.addGetterSetter(Text, 'padding', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'align', LEFT);\nFactory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory.addGetterSetter(Text, 'lineHeight', 1, getNumberValidator());\nFactory.addGetterSetter(Text, 'wrap', WORD);\nFactory.addGetterSetter(Text, 'ellipsis', false, getBooleanValidator());\nFactory.addGetterSetter(Text, 'letterSpacing', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'text', '', getStringValidator());\nFactory.addGetterSetter(Text, 'textDecoration', '');\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Path } from './Path.js';\nimport { Text, stringToArray } from './Text.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nexport class TextPath extends Shape {\n    constructor(config) {\n        super(config);\n        this.dummyCanvas = Util.createCanvasElement();\n        this.dataArray = [];\n        this.dataArray = Path.parsePathData(this.attrs.data);\n        this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.attrs.data);\n            this._setTextData();\n        });\n        this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva', this._setTextData);\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        var textDecoration = this.textDecoration();\n        var fill = this.fill();\n        var fontSize = this.fontSize();\n        var glyphInfo = this.glyphInfo;\n        if (textDecoration === 'underline') {\n            context.beginPath();\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            var p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(fontSize, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (textDecoration === 'underline') {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    }\n    _hitFunc(context) {\n        context.beginPath();\n        var glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            var p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            var p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    setText(text) {\n        return Text.prototype.setText.call(this, text);\n    }\n    _getContextFont() {\n        return Text.prototype._getContextFont.call(this);\n    }\n    _getTextSize(text) {\n        var dummyCanvas = this.dummyCanvas;\n        var _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        var metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(this.attrs.fontSize, 10),\n        };\n    }\n    _setTextData() {\n        var that = this;\n        var size = this._getTextSize(this.attrs.text);\n        var letterSpacing = this.letterSpacing();\n        var align = this.align();\n        var kerningFunc = this.kerningFunc();\n        this.textWidth = size.width;\n        this.textHeight = size.height;\n        var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        this.glyphInfo = [];\n        var fullPathWidth = 0;\n        for (var l = 0; l < that.dataArray.length; l++) {\n            if (that.dataArray[l].pathLength > 0) {\n                fullPathWidth += that.dataArray[l].pathLength;\n            }\n        }\n        var offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, fullPathWidth - textFullWidth);\n        }\n        var charArr = stringToArray(this.text());\n        var spacesNumber = this.text().split(' ').length - 1;\n        var p0, p1, pathCmd;\n        var pIndex = -1;\n        var currentT = 0;\n        var getNextPathSegment = function () {\n            currentT = 0;\n            var pathData = that.dataArray;\n            for (var j = pIndex + 1; j < pathData.length; j++) {\n                if (pathData[j].pathLength > 0) {\n                    pIndex = j;\n                    return pathData[j];\n                }\n                else if (pathData[j].command === 'M') {\n                    p0 = {\n                        x: pathData[j].points[0],\n                        y: pathData[j].points[1],\n                    };\n                }\n            }\n            return {};\n        };\n        var findSegmentToFitCharacter = function (c) {\n            var glyphWidth = that._getTextSize(c).width + letterSpacing;\n            if (c === ' ' && align === 'justify') {\n                glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n            }\n            var currLen = 0;\n            var attempts = 0;\n            p1 = undefined;\n            while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 &&\n                attempts < 20) {\n                attempts++;\n                var cumulativePathLength = currLen;\n                while (pathCmd === undefined) {\n                    pathCmd = getNextPathSegment();\n                    if (pathCmd &&\n                        cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n                        cumulativePathLength += pathCmd.pathLength;\n                        pathCmd = undefined;\n                    }\n                }\n                if (pathCmd === {} || p0 === undefined) {\n                    return undefined;\n                }\n                var needNewSegment = false;\n                switch (pathCmd.command) {\n                    case 'L':\n                        if (Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n                            p1 = Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n                        }\n                        else {\n                            pathCmd = undefined;\n                        }\n                        break;\n                    case 'A':\n                        var start = pathCmd.points[4];\n                        var dTheta = pathCmd.points[5];\n                        var end = pathCmd.points[4] + dTheta;\n                        if (currentT === 0) {\n                            currentT = start + 0.00000001;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += ((Math.PI / 180.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        else {\n                            currentT -= ((Math.PI / 360.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        if ((dTheta < 0 && currentT < end) ||\n                            (dTheta >= 0 && currentT > end)) {\n                            currentT = end;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n                        break;\n                    case 'C':\n                        if (currentT === 0) {\n                            if (glyphWidth > pathCmd.pathLength) {\n                                currentT = 0.00000001;\n                            }\n                            else {\n                                currentT = glyphWidth / pathCmd.pathLength;\n                            }\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength / 2;\n                        }\n                        else {\n                            currentT = Math.max(currentT - (currLen - glyphWidth) / pathCmd.pathLength / 2, 0);\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n                        break;\n                    case 'Q':\n                        if (currentT === 0) {\n                            currentT = glyphWidth / pathCmd.pathLength;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n                        break;\n                }\n                if (p1 !== undefined) {\n                    currLen = Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                }\n                if (needNewSegment) {\n                    needNewSegment = false;\n                    pathCmd = undefined;\n                }\n            }\n        };\n        var testChar = 'C';\n        var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n        var lettersInOffset = offset / glyphWidth - 1;\n        for (var k = 0; k < lettersInOffset; k++) {\n            findSegmentToFitCharacter(testChar);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            p0 = p1;\n        }\n        for (var i = 0; i < charArr.length; i++) {\n            findSegmentToFitCharacter(charArr[i]);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            var width = Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n            var kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            p0.x += kern;\n            p1.x += kern;\n            this.textWidth += kern;\n            var midpoint = Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n            var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: p0,\n                p1: p1,\n            });\n            p0 = p1;\n        }\n    }\n    getSelfRect() {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        var points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        var minX = points[0] || 0;\n        var maxX = points[0] || 0;\n        var minY = points[1] || 0;\n        var maxY = points[1] || 0;\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        var fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize,\n        };\n    }\n}\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n_registerNode(TextPath);\nFactory.addGetterSetter(TextPath, 'data');\nFactory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory.addGetterSetter(TextPath, 'fontSize', 12, getNumberValidator());\nFactory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory.addGetterSetter(TextPath, 'align', 'left');\nFactory.addGetterSetter(TextPath, 'letterSpacing', 0, getNumberValidator());\nFactory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory.addGetterSetter(TextPath, 'kerningFunc', null);\n","import { Util, Transform } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Shape } from '../Shape.js';\nimport { Rect } from './Rect.js';\nimport { Group } from '../Group.js';\nimport { Konva } from '../Global.js';\nimport { getBooleanValidator, getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n]\n    .map((e) => e + `.${EVENTS_NAME}`)\n    .join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n];\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nconst TOUCH_DEVICE = 'ontouchstart' in Konva._global;\nfunction getCursor(anchorName, rad) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util.degToRad(ANGLES[anchorName] || 0);\n    var angle = ((Util.radToDeg(rad) % 360) + 360) % 360;\n    if (Util._inRange(angle, 315 + 22.5, 360) || Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nvar MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    const x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    const y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return Object.assign(Object.assign({}, shape), { rotation: shape.rotation + angleRad, x,\n        y });\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    const center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    let snapped = newRotationRad;\n    for (let i = 0; i < snaps.length; i++) {\n        const angle = Konva.getAngle(snaps[i]);\n        const absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        const dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nexport class Transformer extends Group {\n    constructor(config) {\n        super(config);\n        this._transforming = false;\n        this._createElements();\n        this._handleMouseMove = this._handleMouseMove.bind(this);\n        this._handleMouseUp = this._handleMouseUp.bind(this);\n        this.update = this.update.bind(this);\n        this.on(ATTR_CHANGE_LIST, this.update);\n        if (this.getNode()) {\n            this.update();\n        }\n    }\n    attachTo(node) {\n        this.setNode(node);\n        return this;\n    }\n    setNode(node) {\n        Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    }\n    getNode() {\n        return this._nodes && this._nodes[0];\n    }\n    _getEventNamespace() {\n        return EVENTS_NAME + this._id;\n    }\n    setNodes(nodes = []) {\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        this._nodes = nodes;\n        if (nodes.length === 1 && this.useSingleNodeRotation()) {\n            this.rotation(nodes[0].getAbsoluteRotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach((node) => {\n            const onChange = () => {\n                if (this.nodes().length === 1 && this.useSingleNodeRotation()) {\n                    this.rotation(this.nodes()[0].getAbsoluteRotation());\n                }\n                this._resetTransformCache();\n                if (!this._transforming && !this.isDragging()) {\n                    this.update();\n                }\n            };\n            const additionalEvents = node._attrsAffectingSize\n                .map((prop) => prop + 'Change.' + this._getEventNamespace())\n                .join(' ');\n            node.on(additionalEvents, onChange);\n            node.on(TRANSFORM_CHANGE_STR.map((e) => e + `.${this._getEventNamespace()}`).join(' '), onChange);\n            node.on(`absoluteTransformChange.${this._getEventNamespace()}`, onChange);\n            this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    }\n    _proxyDrag(node) {\n        let lastPos;\n        node.on(`dragstart.${this._getEventNamespace()}`, (e) => {\n            lastPos = node.getAbsolutePosition();\n            if (!this.isDragging() && node !== this.findOne('.back')) {\n                this.startDrag(e, false);\n            }\n        });\n        node.on(`dragmove.${this._getEventNamespace()}`, (e) => {\n            if (!lastPos) {\n                return;\n            }\n            const abs = node.getAbsolutePosition();\n            const dx = abs.x - lastPos.x;\n            const dy = abs.y - lastPos.y;\n            this.nodes().forEach((otherNode) => {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                const otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag(e);\n            });\n            lastPos = null;\n        });\n    }\n    getNodes() {\n        return this._nodes || [];\n    }\n    getActiveAnchor() {\n        return this._movingAnchorName;\n    }\n    detach() {\n        if (this._nodes) {\n            this._nodes.forEach((node) => {\n                node.off('.' + this._getEventNamespace());\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    }\n    _resetTransformCache() {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    }\n    _getNodeRect() {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    }\n    __getNodeShape(node, rot = this.rotation(), relative) {\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        var absScale = node.getAbsoluteScale(relative);\n        var absPos = node.getAbsolutePosition(relative);\n        var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        const rotation = (Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        const box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    }\n    __getNodeRect() {\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        const totalPoints = [];\n        this.nodes().map((node) => {\n            const box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: this.ignoreStroke(),\n            });\n            var points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            var trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                var transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        const tr = new Transform();\n        tr.rotate(-Konva.getAngle(this.rotation()));\n        var minX, minY, maxX, maxY;\n        totalPoints.forEach(function (point) {\n            var transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        const p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: Konva.getAngle(this.rotation()),\n        };\n    }\n    getX() {\n        return this._getNodeRect().x;\n    }\n    getY() {\n        return this._getNodeRect().y;\n    }\n    getWidth() {\n        return this._getNodeRect().width;\n    }\n    getHeight() {\n        return this._getNodeRect().height;\n    }\n    _createElements() {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    }\n    _createAnchor(name) {\n        var anchor = new Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', (e) => {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', () => {\n            var rad = Konva.getAngle(this.rotation());\n            var cursor = getCursor(name, rad);\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = cursor);\n            this._cursorChange = true;\n        });\n        anchor.on('mouseout', () => {\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = '');\n            this._cursorChange = false;\n        });\n        this.add(anchor);\n    }\n    _createBack() {\n        var back = new Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            draggable: true,\n            sceneFunc(ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util._sign(this.height()) - padding);\n                }\n                ctx.fillStrokeShape(this);\n            },\n            hitFunc: (ctx, shape) => {\n                if (!this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                var padding = this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n        back.on('dragstart', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragmove', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        this.on('dragmove', (e) => {\n            this.update();\n        });\n    }\n    _handleMouseDown(e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mousemove', this._handleMouseMove);\n            window.addEventListener('touchmove', this._handleMouseMove);\n            window.addEventListener('mouseup', this._handleMouseUp, true);\n            window.addEventListener('touchend', this._handleMouseUp, true);\n        }\n        this._transforming = true;\n        var ap = e.target.getAbsolutePosition();\n        var pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        this._fire('transformstart', { evt: e.evt, target: this.getNode() });\n        this._nodes.forEach((target) => {\n            target._fire('transformstart', { evt: e.evt, target });\n        });\n    }\n    _handleMouseMove(e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        const pp = stage.getPointerPosition();\n        let newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        const oldAbs = anchorNode.getAbsolutePosition();\n        if (this.anchorDragBoundFunc()) {\n            newNodePos = this.anchorDragBoundFunc()(oldAbs, newNodePos, e);\n        }\n        anchorNode.setAbsolutePosition(newNodePos);\n        const newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            let delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            var oldRotation = Konva.getAngle(this.rotation());\n            const newRotation = oldRotation + delta;\n            const tol = Konva.getAngle(this.rotationSnapTolerance());\n            const snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            const diff = snappedRot - attrs.rotation;\n            const shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        var keepProportion = this.keepRatio() || e.shiftKey;\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: Konva.getAngle(this.rotation()),\n        }, e);\n    }\n    _handleMouseUp(e) {\n        this._removeEvents(e);\n    }\n    getAbsoluteTransform() {\n        return this.getTransform();\n    }\n    _removeEvents(e) {\n        if (this._transforming) {\n            this._transforming = false;\n            if (typeof window !== 'undefined') {\n                window.removeEventListener('mousemove', this._handleMouseMove);\n                window.removeEventListener('touchmove', this._handleMouseMove);\n                window.removeEventListener('mouseup', this._handleMouseUp, true);\n                window.removeEventListener('touchend', this._handleMouseUp, true);\n            }\n            var node = this.getNode();\n            this._fire('transformend', { evt: e, target: node });\n            if (node) {\n                this._nodes.forEach((target) => {\n                    target._fire('transformend', { evt: e, target });\n                });\n            }\n            this._movingAnchorName = null;\n        }\n    }\n    _fitNodesInto(newAttrs, evt) {\n        var oldAttrs = this._getNodeRect();\n        const minSize = 1;\n        if (Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        const allowNegativeScale = this.flipEnabled();\n        var t = new Transform();\n        t.rotate(Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            const offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            const offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this.boundBoxFunc()) {\n            const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        const baseSize = 10000000;\n        const oldTr = new Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        const newTr = new Transform();\n        newTr.translate(newAttrs.x, newAttrs.y);\n        newTr.rotate(newAttrs.rotation);\n        newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n        const delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach((node) => {\n            var _a;\n            const parentTransform = node.getParent().getAbsoluteTransform();\n            const localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            const newLocalTransform = new Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            const attrs = newLocalTransform.decompose();\n            node.setAttrs(attrs);\n            this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n            (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n        });\n        this.rotation(Util._getRotation(newAttrs.rotation));\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    }\n    forceUpdate() {\n        this._resetTransformCache();\n        this.update();\n    }\n    _batchChangeChild(selector, attrs) {\n        const anchor = this.findOne(selector);\n        anchor.setAttrs(attrs);\n    }\n    update() {\n        var _a;\n        var attrs = this._getNodeRect();\n        this.rotation(Util._getRotation(attrs.rotation));\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        this.find('._anchor').forEach((node) => {\n            node.setAttrs({\n                width: anchorSize,\n                height: anchorSize,\n                offsetX: anchorSize / 2,\n                offsetY: anchorSize / 2,\n                stroke: this.anchorStroke(),\n                strokeWidth: this.anchorStrokeWidth(),\n                fill: this.anchorFill(),\n                cornerRadius: this.anchorCornerRadius(),\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            x: 0,\n            y: 0,\n        });\n        (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n    }\n    isTransforming() {\n        return this._transforming;\n    }\n    stopTransform() {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    }\n    destroy() {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content && (this.getStage().content.style.cursor = '');\n        }\n        Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    }\n    toObject() {\n        return Node.prototype.toObject.call(this);\n    }\n}\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\n_registerNode(Transformer);\nFactory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory.addGetterSetter(Transformer, 'flipEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory.addGetterSetter(Transformer, 'anchorSize', 10, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderDash');\nFactory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory.addGetterSetter(Transformer, 'padding', 0, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'node');\nFactory.addGetterSetter(Transformer, 'nodes');\nFactory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory.addGetterSetter(Transformer, 'anchorDragBoundFunc');\nFactory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory.addGetterSetter(Transformer, 'useSingleNodeRotation', true);\nFactory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Konva } from '../Global.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Wedge extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n_registerNode(Wedge);\nFactory.addGetterSetter(Wedge, 'radius', 0, getNumberValidator());\nFactory.addGetterSetter(Wedge, 'angle', 0, getNumberValidator());\nFactory.addGetterSetter(Wedge, 'clockwise', false);\nFactory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle',\n});\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nvar mul_table = [\n    512,\n    512,\n    456,\n    512,\n    328,\n    456,\n    335,\n    512,\n    405,\n    328,\n    271,\n    456,\n    388,\n    335,\n    292,\n    512,\n    454,\n    405,\n    364,\n    328,\n    298,\n    271,\n    496,\n    456,\n    420,\n    388,\n    360,\n    335,\n    312,\n    292,\n    273,\n    512,\n    482,\n    454,\n    428,\n    405,\n    383,\n    364,\n    345,\n    328,\n    312,\n    298,\n    284,\n    271,\n    259,\n    496,\n    475,\n    456,\n    437,\n    420,\n    404,\n    388,\n    374,\n    360,\n    347,\n    335,\n    323,\n    312,\n    302,\n    292,\n    282,\n    273,\n    265,\n    512,\n    497,\n    482,\n    468,\n    454,\n    441,\n    428,\n    417,\n    405,\n    394,\n    383,\n    373,\n    364,\n    354,\n    345,\n    337,\n    328,\n    320,\n    312,\n    305,\n    298,\n    291,\n    284,\n    278,\n    271,\n    265,\n    259,\n    507,\n    496,\n    485,\n    475,\n    465,\n    456,\n    446,\n    437,\n    428,\n    420,\n    412,\n    404,\n    396,\n    388,\n    381,\n    374,\n    367,\n    360,\n    354,\n    347,\n    341,\n    335,\n    329,\n    323,\n    318,\n    312,\n    307,\n    302,\n    297,\n    292,\n    287,\n    282,\n    278,\n    273,\n    269,\n    265,\n    261,\n    512,\n    505,\n    497,\n    489,\n    482,\n    475,\n    468,\n    461,\n    454,\n    447,\n    441,\n    435,\n    428,\n    422,\n    417,\n    411,\n    405,\n    399,\n    394,\n    389,\n    383,\n    378,\n    373,\n    368,\n    364,\n    359,\n    354,\n    350,\n    345,\n    341,\n    337,\n    332,\n    328,\n    324,\n    320,\n    316,\n    312,\n    309,\n    305,\n    301,\n    298,\n    294,\n    291,\n    287,\n    284,\n    281,\n    278,\n    274,\n    271,\n    268,\n    265,\n    262,\n    259,\n    257,\n    507,\n    501,\n    496,\n    491,\n    485,\n    480,\n    475,\n    470,\n    465,\n    460,\n    456,\n    451,\n    446,\n    442,\n    437,\n    433,\n    428,\n    424,\n    420,\n    416,\n    412,\n    408,\n    404,\n    400,\n    396,\n    392,\n    388,\n    385,\n    381,\n    377,\n    374,\n    370,\n    367,\n    363,\n    360,\n    357,\n    354,\n    350,\n    347,\n    344,\n    341,\n    338,\n    335,\n    332,\n    329,\n    326,\n    323,\n    320,\n    318,\n    315,\n    312,\n    310,\n    307,\n    304,\n    302,\n    299,\n    297,\n    294,\n    292,\n    289,\n    287,\n    285,\n    282,\n    280,\n    278,\n    275,\n    273,\n    271,\n    269,\n    267,\n    265,\n    263,\n    261,\n    259,\n];\nvar shg_table = [\n    9,\n    11,\n    12,\n    13,\n    13,\n    14,\n    14,\n    15,\n    15,\n    15,\n    15,\n    16,\n    16,\n    16,\n    16,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    var pixels = imageData.data, width = imageData.width, height = imageData.height;\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    for (i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (y = 0; y < height; y++) {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (x = 0; x < width; x++) {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        yp = width;\n        for (i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nexport const Blur = function Blur(imageData) {\n    var radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\nFactory.addGetterSetter(Node, 'blurRadius', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Brighten = function (imageData) {\n    var brightness = this.brightness() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\nFactory.addGetterSetter(Node, 'brightness', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Contrast = function (imageData) {\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\n    for (i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\nFactory.addGetterSetter(Node, 'contrast', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nexport const Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nFactory.addGetterSetter(Node, 'enhance', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Util } from '../Util.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Emboss = function (imageData) {\n    var strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), dirY = 0, dirX = 0, data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    switch (direction) {\n        case 'top-left':\n            dirY = -1;\n            dirX = -1;\n            break;\n        case 'top':\n            dirY = -1;\n            dirX = 0;\n            break;\n        case 'top-right':\n            dirY = -1;\n            dirX = 1;\n            break;\n        case 'right':\n            dirY = 0;\n            dirX = 1;\n            break;\n        case 'bottom-right':\n            dirY = 1;\n            dirX = 1;\n            break;\n        case 'bottom':\n            dirY = 1;\n            dirX = 0;\n            break;\n        case 'bottom-left':\n            dirY = 1;\n            dirX = -1;\n            break;\n        case 'left':\n            dirY = 0;\n            dirX = -1;\n            break;\n        default:\n            Util.error('Unknown emboss direction: ' + direction);\n    }\n    do {\n        var offsetY = (y - 1) * w4;\n        var otherY = dirY;\n        if (y + otherY < 1) {\n            otherY = 0;\n        }\n        if (y + otherY > h) {\n            otherY = 0;\n        }\n        var offsetYOther = (y - 1 + otherY) * w * 4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var otherX = dirX;\n            if (x + otherX < 1) {\n                otherX = 0;\n            }\n            if (x + otherX > w) {\n                otherX = 0;\n            }\n            var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n            var dR = data[offset] - data[offsetOther];\n            var dG = data[offset + 1] - data[offsetOther + 1];\n            var dB = data[offset + 2] - data[offsetOther + 2];\n            var dif = dR;\n            var absDif = dif > 0 ? dif : -dif;\n            var absG = dG > 0 ? dG : -dG;\n            var absB = dB > 0 ? dB : -dB;\n            if (absG > absDif) {\n                dif = dG;\n            }\n            if (absB > absDif) {\n                dif = dB;\n            }\n            dif *= strength;\n            if (blend) {\n                var r = data[offset] + dif;\n                var g = data[offset + 1] + dif;\n                var b = data[offset + 2] + dif;\n                data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n                data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n                data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n            }\n            else {\n                var grey = greyLevel - dif;\n                if (grey < 0) {\n                    grey = 0;\n                }\n                else if (grey > 255) {\n                    grey = 255;\n                }\n                data[offset] = data[offset + 1] = data[offset + 2] = grey;\n            }\n        } while (--x);\n    } while (--y);\n};\nFactory.addGetterSetter(Node, 'embossStrength', 0.5, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossWhiteLevel', 0.5, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossDirection', 'top-left', null, Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossBlend', false, null, Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nFactory.addGetterSetter(Node, 'hue', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'saturation', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'luminance', 0, getNumberValidator(), Factory.afterSetFilter);\nexport const HSL = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const HSV = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\nFactory.addGetterSetter(Node, 'hue', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'saturation', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'value', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction pixelAt(idata, x, y) {\n    var idx = (y * idata.width + x) * 4;\n    var d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    var m = [0, 0, 0];\n    for (var i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    var rgbv_no = pixelAt(idata, 0, 0);\n    var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    var thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        var mask = [];\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            var d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2],\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (var i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nexport const Mask = function (imageData) {\n    var threshold = this.threshold(), mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\nFactory.addGetterSetter(Node, 'threshold', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Util } from '../Util.js';\nimport { getNumberValidator } from '../Validators.js';\nvar ToPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta;\n    var conversion = ((360 / tSize) * Math.PI) / 180, sin, cos;\n    for (theta = 0; theta < tSize; theta += 1) {\n        sin = Math.sin(theta * conversion);\n        cos = Math.cos(theta * conversion);\n        for (radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            i = (y * xSize + x) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nvar FromPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, dx, dy, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta, phaseShift = opt.polarRotation || 0;\n    var x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            dx = x - xMid;\n            dy = y - yMid;\n            radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            i = (y1 * xSize + x1) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nexport const Kaleidoscope = function (imageData) {\n    var xSize = imageData.width, ySize = imageData.height;\n    var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    var power = Math.round(this.kaleidoscopePower());\n    var angle = Math.round(this.kaleidoscopeAngle());\n    var offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    var tempCanvas = Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    var scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2,\n    });\n    var minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    var sectionSize = minSectionSize;\n    var xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\nFactory.addGetterSetter(Node, 'kaleidoscopePower', 2, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'kaleidoscopeAngle', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Noise = function (imageData) {\n    var amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2, i;\n    for (i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\nFactory.addGetterSetter(Node, 'noise', 0.2, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Util } from '../Util.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Pixelate = function (imageData) {\n    var pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;\n    if (pixelSize <= 0) {\n        Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (yBin = 0; yBin < nBinsY; yBin += 1) {\n            red = 0;\n            green = 0;\n            blue = 0;\n            alpha = 0;\n            xBinStart = xBin * pixelSize;\n            xBinEnd = xBinStart + pixelSize;\n            yBinStart = yBin * pixelSize;\n            yBinEnd = yBinStart + pixelSize;\n            pixelsInBin = 0;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nFactory.addGetterSetter(Node, 'pixelSize', 8, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Posterize = function (imageData) {\n    var levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\nFactory.addGetterSetter(Node, 'levels', 0.5, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { RGBComponent } from '../Validators.js';\nexport const RGB = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\n    for (i = 0; i < nPixels; i += 4) {\n        brightness =\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { RGBComponent } from '../Validators.js';\nexport const RGBA = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\n    for (i = 0; i < nPixels; i += 4) {\n        ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Threshold = function (imageData) {\n    var level = this.threshold() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\nFactory.addGetterSetter(Node, 'threshold', 0.5, getNumberValidator(), Factory.afterSetFilter);\n","import { Konva as Core } from './_CoreInternals.js';\nimport { Arc } from './shapes/Arc.js';\nimport { Arrow } from './shapes/Arrow.js';\nimport { Circle } from './shapes/Circle.js';\nimport { Ellipse } from './shapes/Ellipse.js';\nimport { Image } from './shapes/Image.js';\nimport { Label, Tag } from './shapes/Label.js';\nimport { Line } from './shapes/Line.js';\nimport { Path } from './shapes/Path.js';\nimport { Rect } from './shapes/Rect.js';\nimport { RegularPolygon } from './shapes/RegularPolygon.js';\nimport { Ring } from './shapes/Ring.js';\nimport { Sprite } from './shapes/Sprite.js';\nimport { Star } from './shapes/Star.js';\nimport { Text } from './shapes/Text.js';\nimport { TextPath } from './shapes/TextPath.js';\nimport { Transformer } from './shapes/Transformer.js';\nimport { Wedge } from './shapes/Wedge.js';\nimport { Blur } from './filters/Blur.js';\nimport { Brighten } from './filters/Brighten.js';\nimport { Contrast } from './filters/Contrast.js';\nimport { Emboss } from './filters/Emboss.js';\nimport { Enhance } from './filters/Enhance.js';\nimport { Grayscale } from './filters/Grayscale.js';\nimport { HSL } from './filters/HSL.js';\nimport { HSV } from './filters/HSV.js';\nimport { Invert } from './filters/Invert.js';\nimport { Kaleidoscope } from './filters/Kaleidoscope.js';\nimport { Mask } from './filters/Mask.js';\nimport { Noise } from './filters/Noise.js';\nimport { Pixelate } from './filters/Pixelate.js';\nimport { Posterize } from './filters/Posterize.js';\nimport { RGB } from './filters/RGB.js';\nimport { RGBA } from './filters/RGBA.js';\nimport { Sepia } from './filters/Sepia.js';\nimport { Solarize } from './filters/Solarize.js';\nimport { Threshold } from './filters/Threshold.js';\nexport const Konva = Core.Util._assign(Core, {\n    Arc,\n    Arrow,\n    Circle,\n    Ellipse,\n    Image,\n    Label,\n    Tag,\n    Line,\n    Path,\n    Rect,\n    RegularPolygon,\n    Ring,\n    Sprite,\n    Star,\n    Text,\n    TextPath,\n    Transformer,\n    Wedge,\n    Filters: {\n        Blur,\n        Brighten,\n        Contrast,\n        Emboss,\n        Enhance,\n        Grayscale,\n        HSL,\n        HSV,\n        Invert,\n        Kaleidoscope,\n        Mask,\n        Noise,\n        Pixelate,\n        Posterize,\n        RGB,\n        RGBA,\n        Sepia,\n        Solarize,\n        Threshold,\n    },\n});\n","export const Grayscale = function (imageData) {\n    var data = imageData.data, len = data.length, i, brightness;\n    for (i = 0; i < len; i += 4) {\n        brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\n","export const Invert = function (imageData) {\n    var data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\n","export const Sepia = function (imageData) {\n    var data = imageData.data, nPixels = data.length, i, r, g, b;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\n","export const Solarize = function (imageData) {\n    var data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    do {\n        var offsetY = (y - 1) * w4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var r = data[offset];\n            var g = data[offset + 1];\n            var b = data[offset + 2];\n            if (r > 127) {\n                r = 255 - r;\n            }\n            if (g > 127) {\n                g = 255 - g;\n            }\n            if (b > 127) {\n                b = 255 - b;\n            }\n            data[offset] = r;\n            data[offset + 1] = g;\n            data[offset + 2] = b;\n        } while (--x);\n    } while (--y);\n};\n","import { Konva } from './_FullInternals.js';\nexport default Konva;\n","\r\nexport function shouldAdd(thing : any )\r\n{\r\n    if (thing != null && thing != undefined && thing.toString().length > 0)\r\n    {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function okAsNumber(thing : any )\r\n{\r\n    if (thing != null && thing != undefined && thing.toString().length > 0 && !isNaN(parseInt(thing.toString())))\r\n    {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport class createSectionInfo\r\n{\r\n    shouldProcess: boolean;\r\n    rows: number;\r\n    seats: number;\r\n    constructor()\r\n    {\r\n        this.shouldProcess = true;\r\n        const cont = document.getElementById(\"createButtonContainer\");\r\n        if (shouldAdd(cont) &&         cont.getElementsByTagName(\"input\").length == 2\r\n        &&  okAsNumber( cont.getElementsByTagName(\"input\")[0].value) &&\r\n         okAsNumber( cont.getElementsByTagName(\"input\")[1].value) \r\n        )\r\n        {\r\n            this.seats= parseInt( cont.getElementsByTagName(\"input\")[0].value);\r\n            this.rows= parseInt( cont.getElementsByTagName(\"input\")[1].value);\r\n        }       \r\n        else\r\n        {\r\n            this.shouldProcess = false;\r\n        }\r\n    }\r\n   \r\n\r\n}\r\n\r\nexport function inputWithLabel(id: string  , labelName: string, value: string ) : HTMLElement\r\n{\r\n  const input =   <HTMLInputElement>(document.createElement('input'));\r\n  input.value = value;\r\n  input.id = id;\r\n\r\n  const label = <HTMLLabelElement>(document.createElement('label'));\r\n   label.htmlFor = id;\r\n   label.innerHTML = labelName;\r\n  const container = <HTMLDivElement>(document.createElement('div'));\r\n  container.classList.add(\"formgroup\");\r\n  container.appendChild(label);\r\n  container.appendChild(input);\r\n  return container;\r\n}\r\nexport function createSquare(name: string) : HTMLButtonElement {\r\n    const square =  <HTMLButtonElement>(document.createElement('button'));\r\n    square.innerHTML = name;\r\n\r\nreturn square;\r\n}\r\n","/* eslint-disable prefer-const */\r\nimport {Layer} from \"konva/lib/Layer\";\r\nimport {Stage} from \"konva/lib/Stage\";\r\nimport Konva from 'konva';\r\nimport {shouldAdd} from '../utils/lazy';\r\n\r\nexport class Bucket \r\n{\r\n\r\nBase: HTMLDivElement;\r\nButtonContainer: HTMLDivElement;\r\nBottomContainer: HTMLDivElement;\r\nStage: Stage;\r\nLayer: Layer;\r\nconstructor(baseId: string, stageContainer: string, buttonContainer: string, bottomContainer: string) \r\n    {\r\n    this.Base = document.getElementById(baseId) as HTMLDivElement; \r\n    let containerElement =  document.getElementById(stageContainer);\r\n    if(shouldAdd(containerElement))\r\n    {\r\n    this.Stage =new Konva.Stage({\r\n        container: stageContainer,\r\n        width: containerElement!.clientWidth,\r\n        height:containerElement!.clientHeight,\r\n        \r\n        \r\n      });\r\n      this.Layer = new Konva.Layer();\r\n      this.Stage.add(this.Layer);\r\n    }\r\n    else\r\n    {\r\n      throw console.error((\"No container element. BLARGH\"));\r\n      \r\n    }\r\n\r\n    let  buttonContainerElement =  document.getElementById(buttonContainer) ;\r\n    if(shouldAdd(buttonContainerElement))\r\n    {\r\n      buttonContainerElement.classList.add(\"formGroup\");\r\n      this.ButtonContainer= buttonContainerElement as HTMLDivElement;\r\n    }\r\n    else\r\n    {\r\n      throw console.error((\"No button container element. BLARGH\"));      \r\n    }\r\n    let  bottomContainerElement =  document.getElementById(bottomContainer) ;\r\n    if(shouldAdd(bottomContainerElement))\r\n    {\r\n      bottomContainerElement.classList.add(\"buttongroup\");\r\n      this.BottomContainer = bottomContainerElement as HTMLDivElement;\r\n    }\r\n    else\r\n    {\r\n      throw console.error((\"No bottom container element. BLARGH\"));\r\n      \r\n    }\r\n\r\n    \r\n}\r\n\r\n}\r\nexport default Bucket;\r\n\r\n\r\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import {inputWithLabel} from \"../utils/lazy\"\r\nexport class createSectionItem\r\n{\r\n    rowInput: HTMLInputElement;\r\n    seatLengthInput: HTMLInputElement;\r\n    createButton: HTMLButtonElement;\r\n    Container: HTMLDivElement\r\n    constructor(createButton: HTMLButtonElement)\r\n    {\r\n       const row =  inputWithLabel(\"rowCount\",\"row Count\",\"4\");\r\n       this.rowInput = row.getElementsByTagName(\"input\")[0];\r\n\r\n       const seat =  inputWithLabel(\"seatCount\",\"Seat Length\",\"10\");\r\n       this.seatLengthInput = row.getElementsByTagName(\"input\")[0];\r\n        this.Container =<HTMLDivElement>(document.createElement('div'));\r\n        const titleLegend  =<HTMLLegendElement>(document.createElement('legend'));\r\n        titleLegend.innerHTML=\"Add Section:\"\r\n        this.Container.appendChild(titleLegend);\r\n        const inputContainer =<HTMLDivElement>(document.createElement('div'));\r\n        inputContainer.appendChild(seat);\r\n        inputContainer.appendChild(row);\r\n        const buttonContainer =<HTMLDivElement>(document.createElement('div'));\r\n        buttonContainer.style.clear = \"both\";\r\n        buttonContainer.appendChild(createButton)\r\n        this.Container.appendChild(inputContainer);\r\n        this.Container.appendChild(buttonContainer);\r\n        this.Container.id = \"createButtonContainer\";\r\n        this.Container.className = \"buttonSection\";\r\n    }\r\n}","/* eslint-disable prefer-const */\r\nimport React from 'react';\r\nimport {Rect} from \"konva/lib/shapes/Rect\";\r\nimport {Circle} from \"konva/lib/shapes/Circle\";\r\nimport {Group} from \"konva/lib/Group\";\r\nimport {Text} from \"konva/lib/shapes/Text\";\r\nimport {Transformer} from \"konva/lib/shapes/Transformer\";\r\nimport {shouldAdd, createSquare, createSectionInfo} from '../utils/lazy';\r\nimport {Bucket} from  \"./bucket\";\r\nimport { v4 as uuid } from 'uuid';\r\nimport { createSectionItem } from './createButtonElement';\r\nexport class DoStuff  {\r\nprivate bucket: Bucket;\r\nprivate counter: number;\r\ncreateButton: HTMLElement;\r\nremoveButton: HTMLButtonElement;\r\nconstructor(theBucket: Bucket) \r\n{\r\nthis.bucket = theBucket;\r\nthis.counter = 1;\r\n}\r\ncreateRemoveButton = (identifier: string) => \r\n{\r\nlet toLoad= createSquare(\"Remove Section \" + identifier);\r\ntoLoad.id =identifier;\r\ntoLoad.onclick = this.removeSection.bind(this.bucket);\r\nthis.removeButton = toLoad;\r\n}\r\nremoveSection = (e) =>\r\n{\r\n  let id = e.target.id;\r\n\r\n  this.bucket.Layer.children.forEach((child) =>{\r\n  if (shouldAdd(child.attrs[\"identifier\"]))\r\n  {\r\n    if (child.attrs[\"identifier\"] == id)\r\n    {\r\n    \r\n      child.destroy();\r\n    }\r\n    child.clearCache();\r\n    console.log(child);\r\n  }\r\n  else\r\n  {\r\n\r\n    child.destroy();\r\n  } \r\n\r\n\r\n\r\n}\r\n\r\n  );\r\n\r\n  e.target.remove();\r\n}\r\ncreateSectionButton = () => \r\n{\r\n let toLoad= createSquare(\"Add Section\");\r\n toLoad.onclick = this.addSection.bind(this.bucket);\r\n let sectionArea = new createSectionItem(toLoad);\r\n this.createButton = sectionArea.Container;\r\n}\r\n\r\naddSection = () =>\r\n{\r\n  let values = new createSectionInfo();\r\n  console.log(values);\r\n  if (values.shouldProcess)\r\n  {\r\n  let id =  uuid();\r\n  console.log(\"bucket: \");\r\n  console.log(this.bucket);\r\n  const initialX =100; const initialY=100;\r\n  let rectW = 20 * values.seats; let rectH = 20 * values.rows;\r\n  const transformer =   new Transformer(\r\n    {\r\n    resizeEnabled: false, \r\n    identifier: id,\r\n    anchorSize: 20,     \r\n    anchorStroke: 'red',\r\n  anchorFill: 'yellow',\r\n  borderStroke: 'green',\r\n  borderDash: [3, 3],});\r\n  const group = new Group({\r\n    draggable: true,\r\n    identifier: id\r\n  });\r\n  const rect = new Rect  ({\r\n    x: initialX,\r\n    y: initialY,\r\n    width:rectW,\r\n    height: rectH,\r\n});\r\n\r\n\r\n\r\ngroup.add(rect);\r\nlet circleStartX =100; let circleStartY=100;\r\nfor (let i = 0; i < values.rows; i++) \r\n{\r\n  for (let a = 0; a < values.seats; a++) \r\n{\r\n  let seatID =  uuid();\r\n  const circ = new Circle({    \r\n    x: circleStartX,\r\n    y:circleStartY,\r\n    width:15,\r\n    height:15,\r\n    fill:\"red\",\r\n    id:seatID,\r\n    seatRow: i,\r\n    seat: a,\r\n    seatName: i.toString()+ a.toString(),\r\n    isBooked: false,\r\n});\r\ngroup.add(circ);\r\ncircleStartX = circleStartX + 20;\r\n}\r\ncircleStartY = circleStartY + 20;\r\ncircleStartX=100;\r\n}\r\n//\r\ntransformer.nodes([group]);\r\n\r\nthis.bucket.Layer.add(group);\r\nthis.bucket.Layer.add(transformer);\r\n\r\nthis.createRemoveButton(id);\r\nthis.bucket.BottomContainer.appendChild(this.removeButton);\r\n\r\n}}\r\n}","/* eslint-disable prefer-const */\nimport Konva from 'konva';\nimport { stringToArray } from 'konva/lib/shapes/Text';\nimport {Stage} from \"konva/lib/Stage\";\nimport {Bucket} from  \"./classes/bucket\";\nimport {DoStuff} from \"./classes/doStuff\"\nimport {createSquare} from \"./utils/lazy\"\n\nconsole.log(\"boop\");\nconst bucket = new Bucket(\"root\",\"stageContainer\", \"buttonContainer\", \"bottomContainer\");\nconst doStuff = new DoStuff(bucket);\ndoStuff.createSectionButton();\nconsole.log(doStuff.createButton);\nbucket.ButtonContainer.appendChild(doStuff.createButton);\n  // adapt the stage on any window resize\n"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","PI_OVER_180","Math","PI","glob","global","window","WorkerGlobalScope","self","Konva","_global","version","isBrowser","toString","call","isUnminified","test","param","dblClickWindow","getAngle","angle","angleDeg","enableTrace","pointerEventsEnabled","autoDrawEnabled","hitOnDragEnabled","capturePointerEventsEnabled","_mouseListenClick","_touchListenClick","_pointerListenClick","_mouseInDblClickWindow","_touchInDblClickWindow","_pointerInDblClickWindow","_mouseDblClickPointerId","_touchDblClickPointerId","_pointerDblClickPointerId","pixelRatio","devicePixelRatio","dragDistance","showWarnings","dragButtons","isDragging","isDragReady","node","document","_injectGlobal","_registerNode","NodeClass","getClassName","_arrayWithHoles","arr","Array","isArray","_iterableToArray","iter","Symbol","iterator","from","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","n","slice","constructor","name","_nonIterableRest","Transform","m","this","dirty","tr","point","x","y","sx","sy","rad","c","cos","s","sin","m11","m12","m21","m22","matrix","dx","dy","d","m0","m1","m2","m3","m4","m5","yt","xt","translate","a","b","delta","result","rotation","scaleX","scaleY","skewX","skewY","r","sqrt","acos","Util","_getRotation","PI_OVER_DEG180","DEG180_OVER_PI","KONVA_ERROR","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","req","requestAnimationFrame","f","setTimeout","_isElement","obj","nodeType","_isFunction","apply","_isPlainObject","_isArray","_isNumber","isNaN","isFinite","_isString","_isBoolean","isObject","val","isValidSelector","selector","firstChar","toUpperCase","_sign","number","requestAnimFrame","callback","push","queue","forEach","cb","createCanvasElement","canvas","createElement","style","e","createImageElement","_isInDocument","el","parentNode","_urlToImage","url","imageObj","onload","src","_rgbToHex","g","_hexToRgb","hex","replace","bigint","parseInt","getRandomColor","randColor","random","getRGB","color","rgb","substring","substr","exec","colorToRGBA","str","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","toLowerCase","indexOf","parts","match","split","map","Number","index","t2","t3","hsl","h","l","round","t1","haveIntersection","r1","r2","width","height","cloneObject","retObj","cloneArray","degToRad","deg","radToDeg","_degToRad","warn","_radToDeg","radians","_capitalize","charAt","throw","Error","error","console","each","func","_inRange","left","right","_getProjectionToSegment","x1","y1","x2","y2","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","_prepareArrayForTween","startArray","endArray","start","end","temp","newStart","pr","_prepareToStringify","desc","visitedByCircularReferenceRemoval","hasOwnProperty","getOwnPropertyDescriptor","_assign","source","_getFirstPointerId","evt","touches","changedTouches","identifier","pointerId","_formatValue","RGBComponent","getNumberValidator","attr","getNumberOrArrayOfNumbersValidator","noOfElements","isNumber","isValidArray","getNumberOrAutoValidator","getStringValidator","getStringOrGradientValidator","isString","isGradient","addColorStop","getBooleanValidator","GET","SET","Factory","addGetterSetter","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","method","attrs","undefined","overWriteSetter","_setAttr","addComponentsGetterSetter","components","component","capitalize","getter","setter","ret","getAttr","basicValidator","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","arguments","addDeprecatedGetterSetter","message","backCompat","methods","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","_filterUpToDate","_assertThisInitialized","ReferenceError","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inherits","subClass","superClass","create","value","_getPrototypeOf","getPrototypeOf","_typeof","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","Super","NewTarget","simplifyArray","retArr","util","CONTEXT_METHODS","Context","_context","_canvas","getContext","traceArr","_enableTrace","shape","fillEnabled","_fill","hasStroke","_stroke","fillAfterStrokeEnabled","strokeShape","fillShape","relaxed","rounded","trace","args","join","floor","property","shift","getCanvas","getPixelRatio","setTransform","bounds","clearRect","getWidth","getHeight","lineCap","getLineCap","setAttr","absOpacity","getAbsoluteOpacity","lineJoin","a0","a1","a2","a3","a4","a5","arc","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","a6","a7","a8","drawImage","ellipse","isPointInPath","path2d","fill","fillRect","strokeRect","text","maxWidth","fillText","measureText","getImageData","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","rotate","save","scale","setLineDash","getLineDash","stroke","strokeText","transform","that","origSetter","methodName","origMethod","_trace","prop","op","globalCompositeOperation","get","set","_pixelRatio","SceneContext","_fillFunc","_getFillPattern","grd","_getLinearGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","_fillColor","hasPattern","getFillPatternImage","_fillPattern","hasLinearGradient","getFillLinearGradientColorStops","_fillLinearGradient","hasRadialGradient","getFillRadialGradientColorStops","_fillRadialGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","dash","strokeScaleEnabled","getStrokeScaleEnabled","_applyLineCap","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeLinearGradient","_strokeFunc","_a","_b","_c","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","min","abs","HitContext","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit","Canvas","config","isCache","context","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","margin","border","background","position","top","previousRatio","setSize","setWidth","setHeight","mimeType","quality","toDataURL","err","SceneCanvas","HitCanvas","hitCanvas","DD","flag","_dragElements","elem","dragStatus","justDragged","Map","_drag","nodesToFireEvents","stage","getStage","setPointersPositions","pos","_changedPointerPositions","find","id","max","startPointerPos","startDrag","_setDragPosition","fire","type","_endDragBefore","drawNode","getLayer","batchDraw","_endDragAfter","delete","addEventListener","ABSOLUTE_OPACITY","ALL_LISTENERS","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","LISTENING","MOUSEENTER","MOUSELEAVE","SHAPE","SPACE","STAGE","TRANSFORM","VISIBLE","TRANSFORM_CHANGE_STR","idCounter","Node","_id","eventListeners","_allEventListeners","parent","_cache","_attachedDepsListeners","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","_dragEventId","_shouldFireChangeEvents","setAttrs","clear","privateGetter","cache","deps","depsString","dep","on","_clearCache","_getCache","_clearSelfAndDescendantCache","_requestDraw","conf","getClientRect","skipTransform","relativeTo","getParent","ceil","drawBorder","hitCanvasPixelRatio","cachedSceneCanvas","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","imageSmoothingEnabled","drawScene","drawHit","scene","filter","hit","has","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","_getCanvasCache","cacheCanvas","_getCachedSceneCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","evtStr","handler","_delegate","baseEvent","events","t","_off","off","event","stopNode","targets","findAncestors","currentTarget","stopDrag","_remove","_clearCaches","children","splice","_setChildrenIndices","remove","ancestors","_batchTransformChanges","_isListening","listening","_isVisible","visible","skipDragCheck","layer","layerUnderDrag","dragSkip","isListening","isVisible","nodes","child","depth","getDepth","addChildren","concat","getChildren","getPointerPosition","copy","invert","haveCachedParent","isCached","absoluteMatrix","getMatrix","absoluteTransform","getTranslation","origTrans","_clearTransform","it","_getAbsoluteTransform","_setTransform","setPosition","offsetX","offsetY","change","changeX","changeY","family","unshift","theta","zIndex","_getAbsoluteOpacity","opacity","newContainer","add","defaultValue","getAttrs","className","JSON","stringify","toObject","includeSelf","res","_isMatch","ancestor","sel","selectorArr","hasName","_getStage","eventType","bubble","_fireAndBubble","_fire","at","_eachAncestorReverse","transformsEnabled","multiply","getTransform","copyInto","reset","decompose","_getTransform","skew","allListeners","listener","box","_toKonvaCanvas","img","size","getDragDistance","evtName","evtListeners","newVal","oldName","newName","fullName","names","compareShape","isAncestorOf","stopBubble","cancelBubble","listeners","newEvents","oldEvents","topListeners","_getProtoListeners","selfListeners","ap","getAbsolutePosition","_getPointerById","bubbleEvent","_createDragElement","newNodePos","dbf","dragBoundFunc","bounded","setAbsolutePosition","draggable","_dragChange","_dragCleanup","hasDraggingChild","_listenDrag","dragElement","isReady","screenRect","data","container","parse","_createNode","no","Class","_attrsAffectingSize","_superPropBase","object","_get","receiver","base","rotateDeg","setRotationDeg","getRotationDeg","Container","filterFunc","results","destroy","_validateAdd","hasChildren","destroyChildren","_generalFind","findOne","_descendants","valid","fn","allowArrayLike","F","done","_e","normalCompletion","didErr","step","next","_e2","clone","intersects","can","caching","_drawCachedSceneCanvas","_drawChildren","shouldDrawHit","_drawCachedHitCanvas","drawMethod","clipWidth","clipHeight","clipFunc","hasClip","selfCache","clipX","clipY","hasComposition","selfRect","Infinity","skipShadow","skipStroke","shapes","hasVisible","_transformedRect","_slicedToArray","_i","_s","_arr","_n","_d","_defineProperty","Captures","SUPPORT_POINTER_EVENTS","getCapturedShape","createEvent","hasPointerCapture","setPointerCapture","releaseCapture","PointerEvent","content","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","POINTERCANCEL","POINTEROUT","POINTERLEAVE","POINTEROVER","POINTERENTER","CONTEXTMENU","TOUCHSTART","TOUCHEND","TOUCHMOVE","TOUCHCANCEL","WHEEL","EVENTS","EVENTS_MAP","mouse","touch","pointer","getEventType","getEventsMap","checkNoClip","stages","Stage","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","_checkVisibility","isLayer","getType","isFastLayer","display","getElementsByClassName","getElementById","parentElement","removeChild","appendChild","layers","layerCanvas","getIntersection","bufferCanvas","bufferHitCanvas","draw","rest","PointerEvents","pointerenter","pointerover","evenType","targetShape","_getTargetShape","eventsEnabled","pointerout","pointerleave","pointerPos","triggeredOnShape","pointerdown","isTouch","preventDefault","cancelable","processedShapesIds","differentTarget","assign","pointermove","clickStartShape","clickEndShape","fireDblClick","clearTimeout","pointerup","pointerclick","pointerdblclick","contentPosition","_getContentPosition","clientX","clientY","getBoundingClientRect","clientWidth","clientHeight","innerHTML","userSelect","setAttribute","dummyContext","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","getDummyContext","Shape","sceneFunc","hitFunc","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","pattern","fillPatternRepeat","fillPatternX","fillPatternY","fillPatternRotation","fillPatternScaleX","fillPatternScaleY","fillPatternOffsetX","fillPatternOffsetY","DOMMatrix","__getLinearGradient","fillLinearGradientColorStops","ctx","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","hasShadow","rgba","_calculate","strokeEnabled","strokeLinearGradientColorStops","forceFill","perfectDrawEnabled","hasFill","isTransparent","strokeForShadow","shadowForStrokeEnabled","_centroid","getSelfRect","applyStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","bufferContext","drawFunc","getSceneFunc","skipBuffer","cachingSelf","_useBufferCanvas","_applyLineJoin","_applyShadow","hitImageData","hitData","rgbColorKey","alphaThreshold","hitWidth","hitHeight","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","_waitingForDraw","_setSmoothEnabled","createPNGStream","getHitCanvas","getNativeCanvasElement","insertBefore","moveToTop","moveUp","moveDown","moveToBottom","spiralSearchDistance","continueSearch","intersectionOffset","_getIntersection","antialiased","p3","clearBeforeDraw","hitGraphEnabled","FastLayer","Group","now","performance","Date","getTime","Animation","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","lays","animations","stop","_addAnimation","_removeAnimation","anim","_handleAnimation","layersLen","layerHash","_updateFrameObject","Anim","_runFrames","_animationLoop","animRunning","blacklist","duration","easing","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","reverse","play","update","state","getTimer","onEnterFrame","getPosition","setTime","Tween","nodeId","Easings","Linear","getLayers","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","onUpdate","diff","tweenId","trueEnd","trueStart","endRGBA","closed","startRGBA","onPlay","onReverse","onPause","seek","thisId","to","params","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","asin","pow","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","Global","Arc","clockwise","outerRadius","innerRadius","fillStrokeShape","boundLeftRatio","boundTopRatio","boundBottomRatio","boundLeft","boundTop","boundBottom","_toConsumableArray","getControlPoints","x0","y0","d01","d12","fa","fb","expandPoints","tension","cp","allPoints","Line","tp","bezier","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","item","getNumberArrayValidator","Path","dataArray","pathLength","parsePathData","ca","command","cx","cy","rx","ry","dTheta","psi","fs","inc","getPointOnEllipticalArc","getPointOnCubicBezier","ii","getPointOnLine","getPointOnQuadraticBezier","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","getLineLength","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","RegExp","coords","cpx","cpy","re","j","jlen","parsed","parseFloat","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","idx","convertEndpointToCenterParameterization","calcLength","path","psiDeg","xp","yp","lambda","cxp","cyp","vMag","v","vRatio","vAngle","Arrow","PI2","fromTension","pointerLength","lp","lastLength","previous","atan2","pointerWidth","pointerAtEnding","__fillStroke","pointerAtBeginning","isDashEnabled","lineRect","Circle","radius","Ellipse","radiusX","radiusY","Image","_setImageLoad","image","complete","readyState","cropWidth","cropHeight","cropX","cropY","onError","onerror","crossOrigin","ATTR_CHANGE_LIST","UP","RIGHT","DOWN","LEFT","attrChangeListLen","Label","_sync","getText","pointerDirection","pointerHeight","tag","getTag","Tag","cornerRadius","topLeft","topRight","bottomLeft","bottomRight","direction","Rect","RegularPolygon","_getPoints","sides","PIx2","Ring","Sprite","_updated","updated","frameIndex","isRunning","clearInterval","interval","_setInterval","animation","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","Star","numPoints","stringToArray","string","AUTO","JUSTIFY","MIDDLE","NORMAL","Text","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","textArr","textArrLen","fontSize","lineHeightPx","lineHeight","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","lastInParagraph","strokeStyle","array","li","letter","_partialText","measureSize","getTextWidth","textWidth","textHeight","metrics","font","fontStyle","fontVariant","fontFamily","hasSpace","trim","hasQuotes","_getTextWidth","lines","fixedWidth","fixedHeight","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","lastIndexOf","trimRight","_addTextLine","trimLeft","partialText","TextPath","dummyCanvas","textBaseline","glyphInfo","p0","setText","_getTextSize","kerningFunc","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","lettersInOffset","k","kern","midpoint","transposeX","transposeY","info","EVENTS_NAME","NODES_RECT","ANGLES","TOUCH_DEVICE","ANCHORS_NAMES","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","center","getCenter","Transformer","_transforming","_createElements","_handleMouseMove","_handleMouseUp","getNode","setNode","setNodes","_nodes","detach","useSingleNodeRotation","getAbsoluteRotation","onChange","_resetTransformCache","additionalEvents","_getEventNamespace","_proxyDrag","elementsCreated","lastPos","otherNode","otherAbs","_movingAnchorName","__getNodeRect","rot","relative","ignoreStroke","absScale","absPos","totalPoints","_getNodeRect","_createBack","_createAnchor","anchor","_handleMouseDown","cursor","anchorName","getCursor","_cursorChange","back","rotateEnabled","rotateAnchorOffset","shouldOverdrawWholeArea","hypotenuse","_anchorDragOffset","newHypotenuse","anchorNode","pp","oldAbs","anchorDragBoundFunc","newAbs","keepProportion","keepRatio","shiftKey","centeredScaling","altKey","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","move","_fitNodesInto","newRotation","tol","rotationSnapTolerance","snappedRot","snaps","newRotationRad","snapped","absDiff","getSnap","rotationSnaps","_removeEvents","removeEventListener","newAttrs","oldAttrs","allowNegativeScale","flipEnabled","boundBoxFunc","baseSize","oldTr","newTr","parentTransform","localTransform","newLocalTransform","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","_batchChangeChild","borderEnabled","borderStroke","borderStrokeWidth","borderDash","lineEnabled","rotateHandlerOffset","enabledHandlers","Wedge","BlurStack","getAngleDeg","setAngleDeg","mul_table","shg_table","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","pixelAt","idata","rgbDistance","Core","Filters","Blur","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","Brighten","brightness","Contrast","adjust","contrast","nPixels","Emboss","strength","embossStrength","greyLevel","embossWhiteLevel","embossDirection","blend","embossBlend","dirY","dirX","w","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","Enhance","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","Grayscale","HSL","saturation","hue","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","HSV","Invert","Kaleidoscope","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","tempCanvas","scratchData","dst","opt","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","xStart","xEnd","xDelta","phaseShift","polarRotation","FromPolar","Mask","mask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","weights","side","halfSide","maskResult","so","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","Noise","amount","noise","half","Pixelate","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","Posterize","levels","RGB","RGBA","ia","Sepia","Solarize","Threshold","level","shouldAdd","thing","okAsNumber","createSectionInfo","shouldProcess","rows","seats","cont","getElementsByTagName","inputWithLabel","labelName","input","label","htmlFor","classList","createSquare","square","getRandomValues","Bucket","baseId","stageContainer","buttonContainer","bottomContainer","Base","ButtonContainer","BottomContainer","containerElement","buttonContainerElement","bottomContainerElement","rnds8","Uint8Array","rng","crypto","msCrypto","uuid","REGEX","byteToHex","validate","options","buf","rnds","createSectionItem","createButton","rowInput","seatLengthInput","row","seat","titleLegend","inputContainer","DoStuff","theBucket","bucket","counter","removeButton","createRemoveButton","toLoad","onclick","removeSection","clearCache","log","createSectionButton","addSection","sectionArea","values","rectW","rectH","transformer","group","circleStartX","circleStartY","seatID","circ","seatRow","seatName","isBooked","doStuff"],"sourceRoot":""}